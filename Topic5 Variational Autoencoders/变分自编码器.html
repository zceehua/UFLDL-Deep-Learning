<!DOCTYPE html>
<!-- saved from url=(0031)http://www.dengfanxin.cn/?p=334 -->
<html lang="zh-CN"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="profile" href="http://gmpg.org/xfn/11">
<link rel="pingback" href="http://www.dengfanxin.cn/xmlrpc.php">
<title>变分自编码器（Variational Autoencoder, VAE）通俗教程 – 邓范鑫——致力于变革未来的智能技术</title>
<link rel="alternate" type="application/rss+xml" title="邓范鑫——致力于变革未来的智能技术 » Feed" href="http://www.dengfanxin.cn/?feed=rss2">
<link rel="alternate" type="application/rss+xml" title="邓范鑫——致力于变革未来的智能技术 » 评论Feed" href="http://www.dengfanxin.cn/?feed=comments-rss2">
		<script src="./变分自编码器_files/hm.js.下载"></script><script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/72x72\/","ext":".png","source":{"concatemoji":"http:\/\/www.dengfanxin.cn\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.4.2"}};
			!function(a,b,c){function d(a){var c,d=b.createElement("canvas"),e=d.getContext&&d.getContext("2d"),f=String.fromCharCode;return e&&e.fillText?(e.textBaseline="top",e.font="600 32px Arial","flag"===a?(e.fillText(f(55356,56806,55356,56826),0,0),d.toDataURL().length>3e3):"diversity"===a?(e.fillText(f(55356,57221),0,0),c=e.getImageData(16,16,1,1).data.toString(),e.fillText(f(55356,57221,55356,57343),0,0),c!==e.getImageData(16,16,1,1).data.toString()):("simple"===a?e.fillText(f(55357,56835),0,0):e.fillText(f(55356,57135),0,0),0!==e.getImageData(16,16,1,1).data[0])):!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g;c.supports={simple:d("simple"),flag:d("flag"),unicode8:d("unicode8"),diversity:d("diversity")},c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.simple&&c.supports.flag&&c.supports.unicode8&&c.supports.diversity||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script><script src="./变分自编码器_files/wp-emoji-release.min.js.下载" type="text/javascript"></script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel="stylesheet" id="accelerate_style-css" href="./变分自编码器_files/style.css" type="text/css" media="all">
<link rel="stylesheet" id="accelerate-fontawesome-css" href="./变分自编码器_files/font-awesome.css" type="text/css" media="all">
<script type="text/javascript" src="./变分自编码器_files/jquery.js.下载"></script>
<script type="text/javascript" src="./变分自编码器_files/jquery-migrate.min.js.下载"></script>
<script type="text/javascript" src="./变分自编码器_files/accelerate-custom.js.下载"></script>
<link rel="https://api.w.org/" href="http://www.dengfanxin.cn/?rest_route=/">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.dengfanxin.cn/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.dengfanxin.cn/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="STDP与无监督学习" href="http://www.dengfanxin.cn/?p=330">
<meta name="generator" content="WordPress 4.4.2">
<link rel="canonical" href="http://www.dengfanxin.cn/?p=334">
<link rel="shortlink" href="http://www.dengfanxin.cn/?p=334">
<link rel="alternate" type="application/json+oembed" href="http://www.dengfanxin.cn/?rest_route=%2Foembed%2F1.0%2Fembed&amp;url=http%3A%2F%2Fwww.dengfanxin.cn%2F%3Fp%3D334">
<link rel="alternate" type="text/xml+oembed" href="http://www.dengfanxin.cn/?rest_route=%2Foembed%2F1.0%2Fembed&amp;url=http%3A%2F%2Fwww.dengfanxin.cn%2F%3Fp%3D334&amp;format=xml">
<style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax_LineBox {display: table!important}
.MathJax_LineBox span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Main; src: url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Regular.woff?V=2.7.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Regular.otf?V=2.7.0') format('opentype')}
@font-face {font-family: MathJax_Main-bold; src: url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Bold.woff?V=2.7.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Bold.otf?V=2.7.0') format('opentype')}
@font-face {font-family: MathJax_Main-italic; src: url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/woff/MathJax_Main-Italic.woff?V=2.7.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/otf/MathJax_Main-Italic.otf?V=2.7.0') format('opentype')}
@font-face {font-family: MathJax_Math-italic; src: url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/woff/MathJax_Math-Italic.woff?V=2.7.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/otf/MathJax_Math-Italic.otf?V=2.7.0') format('opentype')}
@font-face {font-family: MathJax_Caligraphic; src: url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/woff/MathJax_Caligraphic-Regular.woff?V=2.7.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf?V=2.7.0') format('opentype')}
@font-face {font-family: MathJax_Size1; src: url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/woff/MathJax_Size1-Regular.woff?V=2.7.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/otf/MathJax_Size1-Regular.otf?V=2.7.0') format('opentype')}
@font-face {font-family: MathJax_Size2; src: url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/woff/MathJax_Size2-Regular.woff?V=2.7.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/otf/MathJax_Size2-Regular.otf?V=2.7.0') format('opentype')}
@font-face {font-family: MathJax_Size3; src: url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/woff/MathJax_Size3-Regular.woff?V=2.7.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/otf/MathJax_Size3-Regular.otf?V=2.7.0') format('opentype')}
@font-face {font-family: MathJax_Size4; src: url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/woff/MathJax_Size4-Regular.woff?V=2.7.0') format('woff'), url('https://cdn.mathjax.org/mathjax/2.7-latest/fonts/HTML-CSS/TeX/otf/MathJax_Size4-Regular.otf?V=2.7.0') format('opentype')}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style></head>

<body class="single single-post postid-334 single-format-standard  wide"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>
<div id="page" class="hfeed site">
		<header id="masthead" class="site-header clearfix">

		<div id="header-text-nav-container" class="clearfix">

			
			<div class="inner-wrap">

				<div id="header-text-nav-wrap" class="clearfix">
					<div id="header-left-section">
												<div id="header-text">
							<h1 id="site-title">
								<a href="http://www.dengfanxin.cn/" title="邓范鑫——致力于变革未来的智能技术" rel="home">邓范鑫——致力于变革未来的智能技术</a>
							</h1>
							<h2 id="site-description">智能时代即将来临</h2><!-- #site-description -->
						</div><!-- #header-text -->
											</div><!-- #header-left-section -->
					<div id="header-right-section">
									    	</div><!-- #header-right-section -->

			   </div><!-- #header-text-nav-wrap -->

			</div><!-- .inner-wrap -->

			
			<nav id="site-navigation" class="main-navigation inner-wrap clearfix" role="navigation">
				<h3 class="menu-toggle">Menu</h3>
				<div class="menu"><ul class="nav-menu"><li class="page_item page-item-357"><a href="http://www.dengfanxin.cn/?page_id=357">AI网站集锦</a></li><li class="page_item page-item-2"><a href="http://www.dengfanxin.cn/?page_id=2">我是谁</a></li><li class="page_item page-item-8"><a href="http://www.dengfanxin.cn/?page_id=8">致未来十年</a></li><li class="page_item page-item-187"><a href="http://www.dengfanxin.cn/?page_id=187">重点推荐</a></li></ul></div>
			</nav>
		</div><!-- #header-text-nav-container -->

		
		
	</header>
			<div id="main" class="clearfix">
		<div class="inner-wrap clearfix">
			
	<div id="primary">
		<div id="content" class="clearfix">

						
				
<article id="post-334" class="post-334 post type-post status-publish format-standard hentry category-31 category-3">
	
	<header class="entry-header">
		<h1 class="entry-title">
			变分自编码器（Variational Autoencoder, VAE）通俗教程		</h1>
	</header>

	<div class="entry-meta">	<span class="byline"><span class="author vcard"><i class="fa fa-user"></i><a class="url fn n" href="http://www.dengfanxin.cn/?author=1" title="dengfanxin">dengfanxin</a></span></span>
	<span class="cat-links"><i class="fa fa-folder-open"></i><a href="http://www.dengfanxin.cn/?cat=31" rel="category">教程</a>, <a href="http://www.dengfanxin.cn/?cat=3" rel="category">智能技术</a></span>
		<span class="sep"><span class="post-format"><i class="fa "></i></span></span>

		<span class="posted-on"><a href="http://www.dengfanxin.cn/?p=334" title="下午1:01" rel="bookmark"><i class="fa fa-calendar-o"></i> <time class="entry-date published" datetime="2016-11-15T13:01:24+00:00">2016年11月15日</time><time class="updated" datetime="2016-11-17T18:31:47+00:00">2016年11月17日</time></a></span></div>
	<div class="entry-content clearfix">
		<h3>1. 神秘变量与数据集</h3>
<p>现在有一个数据集DX(dataset, 也可以叫datapoints)，每个数据也称为数据点。<br>
我们假定这个样本受某种<strong>神秘力量</strong>操控，但是我们也无从知道这些神秘力量是什么？那么我们假定这股神秘力量有n个，起名字叫<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1" style="width: 12.563em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.967em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.61em 1011.97em 2.562em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Math-italic;">p</span><span class="mi" id="MathJax-Span-4" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-5" style="font-family: MathJax_Math-italic;">w</span><span class="mi" id="MathJax-Span-6" style="font-family: MathJax_Math-italic;">e</span><span class="msubsup" id="MathJax-Span-7"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.42em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-8" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mn" id="MathJax-Span-9" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-10" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-11" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">p</span><span class="mi" id="MathJax-Span-12" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-13" style="font-family: MathJax_Math-italic;">w</span><span class="mi" id="MathJax-Span-14" style="font-family: MathJax_Math-italic;">e</span><span class="msubsup" id="MathJax-Span-15"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.42em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-16" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mn" id="MathJax-Span-17" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-18" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-19" style="font-family: MathJax_Main; padding-left: 0.182em;">…</span><span class="mo" id="MathJax-Span-20" style="font-family: MathJax_Main; padding-left: 0.182em;">,</span><span class="mi" id="MathJax-Span-21" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">p</span><span class="mi" id="MathJax-Span-22" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-23" style="font-family: MathJax_Math-italic;">w</span><span class="mi" id="MathJax-Span-24" style="font-family: MathJax_Math-italic;">e</span><span class="msubsup" id="MathJax-Span-25"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.42em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-26" style="font-family: MathJax_Math-italic;">r</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mi" id="MathJax-Span-27" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-1">power_1, power_2,…, power_n</script>吧，他们的大小分别是<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-28" style="width: 5.777em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.479em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.61em 1005.48em 2.562em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-29"><span class="msubsup" id="MathJax-Span-30"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.48em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-31" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mn" id="MathJax-Span-32" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-33" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-34" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.48em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-35" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mn" id="MathJax-Span-36" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-37" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-38" style="font-family: MathJax_Main; padding-left: 0.182em;">…</span><span class="mo" id="MathJax-Span-39" style="font-family: MathJax_Main; padding-left: 0.182em;">,</span><span class="msubsup" id="MathJax-Span-40" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.48em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-41" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mi" id="MathJax-Span-42" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-2">z_1, z_2, …, z_n</script>，称之为<strong>神秘变量</strong>表示成一个向量就是</p>
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-43" style="width: 5.182em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.943em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(2.027em 1004.65em 8.098em -999.997em); top: -5.295em; left: 0em;"><span class="mrow" id="MathJax-Span-44"><span class="mi" id="MathJax-Span-45" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-46" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mrow" id="MathJax-Span-47" style="padding-left: 0.301em;"><span class="mo" id="MathJax-Span-48" style="vertical-align: 3.098em;"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px;"><span style="position: absolute; font-family: MathJax_Size4; top: -2.854em; left: 0em;">⎛<span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; font-family: MathJax_Size4; top: 1.074em; left: 0em;">⎝<span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -1.664em; left: 0em;">⎜<span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -1.128em; left: 0em;">⎜<span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -0.592em; left: 0em;">⎜<span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: 0.003em; left: 0em;">⎜<span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mtable" id="MathJax-Span-49" style="padding-right: 0.182em; padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.96em 9.051em -999.997em); top: -6.307em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.9em 4.348em -999.997em); top: -6.307em; left: 50%; margin-left: -0.473em;"><span class="mtd" id="MathJax-Span-50"><span class="mrow" id="MathJax-Span-51"><span class="msubsup" id="MathJax-Span-52"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.48em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-53" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mn" id="MathJax-Span-54" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.396em 1000.9em 4.348em -999.997em); top: -4.878em; left: 50%; margin-left: -0.473em;"><span class="mtd" id="MathJax-Span-55"><span class="mrow" id="MathJax-Span-56"><span class="msubsup" id="MathJax-Span-57"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.48em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-58" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mn" id="MathJax-Span-59" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(2.503em 1000.18em 4.229em -999.997em); top: -2.973em; left: 50%; margin-left: -0.116em;"><span class="mtd" id="MathJax-Span-60"><span class="mrow" id="MathJax-Span-61"><span class="mo" id="MathJax-Span-62" style="font-family: MathJax_Main;">⋮</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.396em 1000.96em 4.348em -999.997em); top: -1.604em; left: 50%; margin-left: -0.473em;"><span class="mtd" id="MathJax-Span-63"><span class="mrow" id="MathJax-Span-64"><span class="msubsup" id="MathJax-Span-65"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.48em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-66" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mi" id="MathJax-Span-67" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span><span style="display: inline-block; width: 0px; height: 6.313em;"></span></span></span></span><span class="mo" id="MathJax-Span-68" style="vertical-align: 3.098em;"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px;"><span style="position: absolute; font-family: MathJax_Size4; top: -2.854em; left: 0em;">⎞<span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; font-family: MathJax_Size4; top: 1.074em; left: 0em;">⎠<span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -1.664em; left: 0em;">⎟<span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -1.128em; left: 0em;">⎟<span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: -0.592em; left: 0em;">⎟<span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="font-family: MathJax_Size4; position: absolute; top: 0.003em; left: 0em;">⎟<span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 5.301em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -2.809em; border-left: 0px solid; width: 0px; height: 6.128em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-3"> 
z = 
\left( 
\begin{array}{c} 
z_1\\ 
z_2\\ 
\vdots\\ 
z_n 
\end{array} 
\right) 
</script>
<p>z也起个名字叫<strong>神秘组合</strong>。</p>
<p>一言以蔽之：<strong>神秘变量</strong>代表了<strong>神秘力量</strong>的<strong>神秘组合</strong>关系。<br>
用正经的话说就是：<strong>隐变量(latent variable)</strong>代表了<strong>隐因子(latent factor)</strong>的组合关系。<span id="more-334"></span></p>
<p>这里我们澄清一下隶属空间，假设数据集DX是m个点，这m个点也应该隶属于一个空间，比如一维的情况，假如每个点是一个实数，那么他的隶属空间就是实数集，所以我们这里定义一个DX每个点都属于的空间称为XS，我们在后面提到的时候，你就不再感到陌生了。</p>
<p>神秘变量z可以肯定他们也有一个归属空间称为ZS。</p>
<p>下面我们就要形式化地构造X与Z的神秘关系了，这个关系就是我们前面说的神秘力量，直观上我们已经非常清楚，假设我们的数据集就是完全由这n个神秘变量全权操控的，那么对于X中每一个点都应该有一个n个神秘变量的<strong>神秘组合</strong><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-69" style="width: 0.896em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.491em 1000.84em 2.562em -999.997em); top: -2.08em; left: 0em;"><span class="mrow" id="MathJax-Span-70"><span class="msubsup" id="MathJax-Span-71"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.48em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-72" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mi" id="MathJax-Span-73" style="font-size: 70.7%; font-family: MathJax_Math-italic;">j</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.086em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-4">z_j</script>来神秘决定。</p>
<p>接下来我们要将这个关系再简化一下，我们假设这n个神秘变量不是能够操控X的全部，还有一些其他的神秘力量，我们暂时不考虑，那么就可以用概率来弥补这个缺失，为什么呢？举个例子，假设我们制造了一个机器可以向一个固定的目标发射子弹，我们精确的计算好了打击的力量和角度，但由于某些难以控制的因素，比如空气的流动，地球的转动导致命中的目标无法达到精准的目的，而这些因素可能十分巨大和繁多，但是他们并不是形成DX的主因素，根据大数定理，这些所有因素产生的影响可以用高斯分布的概率密度函数来表示。它长这样：<br>
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-74" style="width: 12.205em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.61em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(0.836em 1011.61em 3.039em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-75"><span class="mi" id="MathJax-Span-76" style="font-family: MathJax_Math-italic;">p</span><span class="mo" id="MathJax-Span-77" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-78" style="font-family: MathJax_Math-italic;">x</span><span class="texatom" id="MathJax-Span-79"><span class="mrow" id="MathJax-Span-80"><span class="mo" id="MathJax-Span-81" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-82" style="font-family: MathJax_Math-italic;">μ</span><span class="mo" id="MathJax-Span-83" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-84" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.6em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-85" style="font-family: MathJax_Math-italic;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="mn" id="MathJax-Span-86" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-87" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-88" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mfrac" id="MathJax-Span-89" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 1.848em; height: 0px; margin-right: 0.122em; margin-left: 0.122em;"><span style="position: absolute; clip: rect(3.336em 1000.3em 4.17em -999.997em); top: -4.402em; left: 50%; margin-left: -0.176em;"><span class="mn" id="MathJax-Span-90" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.217em 1001.73em 4.289em -999.997em); top: -3.509em; left: 50%; margin-left: -0.89em;"><span class="mrow" id="MathJax-Span-91"><span class="msqrt" id="MathJax-Span-92"><span style="display: inline-block; position: relative; width: 1.372em; height: 0px;"><span style="position: absolute; clip: rect(3.336em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0.598em;"><span class="mrow" id="MathJax-Span-93"><span class="mn" id="MathJax-Span-94" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span class="mi" id="MathJax-Span-95" style="font-size: 70.7%; font-family: MathJax_Math-italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.955em 1000.78em 1.313em -999.997em); top: -1.664em; left: 0.598em;"><span style="display: inline-block; overflow: hidden; vertical-align: -0.057em; border-top: 1.2px solid; width: 0.777em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span><span style="position: absolute; clip: rect(3.217em 1000.6em 4.289em -999.997em); top: -3.985em; left: 0em;"><span><span style="font-size: 70.7%; font-family: MathJax_Main;">√</span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mi" id="MathJax-Span-96" style="font-size: 70.7%; font-family: MathJax_Math-italic;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.836em 1001.85em 1.253em -999.997em); top: -1.307em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.848em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-97"><span style="display: inline-block; position: relative; width: 3.872em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.42em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-98" style="font-family: MathJax_Math-italic;">e</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.402em; left: 0.479em;"><span class="texatom" id="MathJax-Span-99"><span class="mrow" id="MathJax-Span-100"><span class="mo" id="MathJax-Span-101" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="mfrac" id="MathJax-Span-102"><span style="display: inline-block; position: relative; width: 0.36em; height: 0px; margin-right: 0.122em; margin-left: 0.122em;"><span style="position: absolute; clip: rect(3.455em 1000.24em 4.17em -999.997em); top: -4.342em; left: 50%; margin-left: -0.116em;"><span class="mn" id="MathJax-Span-103" style="font-size: 50%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.455em 1000.24em 4.17em -999.997em); top: -3.628em; left: 50%; margin-left: -0.116em;"><span class="mn" id="MathJax-Span-104" style="font-size: 50%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.836em 1000.36em 1.253em -999.997em); top: -1.188em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.36em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span></span></span><span class="mo" id="MathJax-Span-105" style="font-size: 70.7%; font-family: MathJax_Main;">(</span><span class="mfrac" id="MathJax-Span-106"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px; margin-right: 0.122em; margin-left: 0.122em;"><span style="position: absolute; clip: rect(3.515em 1000.96em 4.289em -999.997em); top: -4.461em; left: 50%; margin-left: -0.473em;"><span class="mrow" id="MathJax-Span-107"><span class="mi" id="MathJax-Span-108" style="font-size: 50%; font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-109" style="font-size: 50%; font-family: MathJax_Main;">−</span><span class="mi" id="MathJax-Span-110" style="font-size: 50%; font-family: MathJax_Math-italic;">μ</span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.574em 1000.3em 4.17em -999.997em); top: -3.747em; left: 50%; margin-left: -0.116em;"><span class="mi" id="MathJax-Span-111" style="font-size: 50%; font-family: MathJax_Math-italic;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.836em 1001.07em 1.253em -999.997em); top: -1.188em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.074em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-112"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(3.277em 1000.18em 4.348em -999.997em); top: -3.985em; left: 0em;"><span class="mo" id="MathJax-Span-113" style="font-size: 70.7%; font-family: MathJax_Main;">)</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.301em;"><span class="mn" id="MathJax-Span-114" style="font-size: 50%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.747em; border-left: 0px solid; width: 0px; height: 2.003em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-5">p(x|\mu,\sigma^2) = \frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{1}{2}(\frac{x-\mu}{\sigma})^2} </script></p>
<p>当<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-115" style="width: 2.622em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.503em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.372em 1002.44em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-116"><span class="mi" id="MathJax-Span-117" style="font-family: MathJax_Math-italic;">μ</span><span class="mo" id="MathJax-Span-118" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mn" id="MathJax-Span-119" style="font-family: MathJax_Main; padding-left: 0.301em;">0</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.066em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-6">\mu = 0 </script>时，就变成了这样：<br>
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-120" style="width: 9.467em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.991em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(0.598em 1008.99em 3.039em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-121"><span class="mi" id="MathJax-Span-122" style="font-family: MathJax_Math-italic;">p</span><span class="mo" id="MathJax-Span-123" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-124" style="font-family: MathJax_Math-italic;">x</span><span class="texatom" id="MathJax-Span-125"><span class="mrow" id="MathJax-Span-126"><span class="mo" id="MathJax-Span-127" style="font-family: MathJax_Main;">|</span></span></span><span class="msubsup" id="MathJax-Span-128"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.6em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-129" style="font-family: MathJax_Math-italic;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="mn" id="MathJax-Span-130" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-131" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-132" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mfrac" id="MathJax-Span-133" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 1.848em; height: 0px; margin-right: 0.122em; margin-left: 0.122em;"><span style="position: absolute; clip: rect(3.336em 1000.3em 4.17em -999.997em); top: -4.402em; left: 50%; margin-left: -0.176em;"><span class="mn" id="MathJax-Span-134" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.217em 1001.73em 4.289em -999.997em); top: -3.509em; left: 50%; margin-left: -0.89em;"><span class="mrow" id="MathJax-Span-135"><span class="msqrt" id="MathJax-Span-136"><span style="display: inline-block; position: relative; width: 1.372em; height: 0px;"><span style="position: absolute; clip: rect(3.336em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0.598em;"><span class="mrow" id="MathJax-Span-137"><span class="mn" id="MathJax-Span-138" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span class="mi" id="MathJax-Span-139" style="font-size: 70.7%; font-family: MathJax_Math-italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.955em 1000.78em 1.313em -999.997em); top: -1.664em; left: 0.598em;"><span style="display: inline-block; overflow: hidden; vertical-align: -0.057em; border-top: 1.2px solid; width: 0.777em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span><span style="position: absolute; clip: rect(3.217em 1000.6em 4.289em -999.997em); top: -3.985em; left: 0em;"><span><span style="font-size: 70.7%; font-family: MathJax_Main;">√</span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mi" id="MathJax-Span-140" style="font-size: 70.7%; font-family: MathJax_Math-italic;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.836em 1001.85em 1.253em -999.997em); top: -1.307em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.848em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-141"><span style="display: inline-block; position: relative; width: 2.324em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.42em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-142" style="font-family: MathJax_Math-italic;">e</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.58em; left: 0.479em;"><span class="texatom" id="MathJax-Span-143"><span class="mrow" id="MathJax-Span-144"><span class="mo" id="MathJax-Span-145" style="font-size: 70.7%; font-family: MathJax_Main;">−</span><span class="mfrac" id="MathJax-Span-146"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px; margin-right: 0.122em; margin-left: 0.122em;"><span style="position: absolute; clip: rect(3.277em 1000.6em 4.17em -999.997em); top: -4.342em; left: 50%; margin-left: -0.295em;"><span class="msubsup" id="MathJax-Span-147"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(3.574em 1000.24em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-148" style="font-size: 50%; font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.164em; left: 0.301em;"><span class="mn" id="MathJax-Span-149" style="font-size: 50%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.336em 1000.9em 4.17em -999.997em); top: -3.509em; left: 50%; margin-left: -0.414em;"><span class="mrow" id="MathJax-Span-150"><span class="mn" id="MathJax-Span-151" style="font-size: 50%; font-family: MathJax_Main;">2</span><span class="msubsup" id="MathJax-Span-152"><span style="display: inline-block; position: relative; width: 0.598em; height: 0px;"><span style="position: absolute; clip: rect(3.574em 1000.3em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-153" style="font-size: 50%; font-family: MathJax_Math-italic;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.104em; left: 0.36em;"><span class="mn" id="MathJax-Span-154" style="font-size: 50%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.836em 1001.01em 1.253em -999.997em); top: -1.188em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.015em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.747em; border-left: 0px solid; width: 0px; height: 2.316em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-7"> p(x|\sigma^2) = \frac{1}{\sqrt{2\pi}\sigma}e^{-\frac{x^2}{2\sigma^2}} </script><br>
这是一维高斯分布的公式，那么多维的呢？比较复杂，推导过程见<a href="https://www.zhihu.com/question/36339816/answer/76856528?group_id=779015709270228992#comment-180007793">知乎</a>，长这样：<br>
<a href="http://www.dengfanxin.cn/wp-content/uploads/2016/11/Formula.png" rel="attachment wp-att-338"><img class="aligncenter wp-image-338 size-medium" src="./变分自编码器_files/Formula-300x167.png" alt="Formula" width="300" height="167" srcset="http://www.dengfanxin.cn/wp-content/uploads/2016/11/Formula-300x167.png 300w, http://www.dengfanxin.cn/wp-content/uploads/2016/11/Formula.png 575w" sizes="(max-width: 300px) 100vw, 300px"></a></p>
<p>不管怎样，你只要记住我们现在没有能力关注全部的神秘变量，我们只关心若干个可能重要的因素，这些因素的分布状况可以有各种假设，我们回头再讨论他们的概率分布问题，我们现在假定我们对他们的具体分布情况也是一无所知，我们只是知道他们处于ZS空间内。<br>
前面说到了一个神秘组合，如果一个数据集X对应的神秘组合完全一样，那么这个数据集就是一个单一的分类数据集，如果是多个，那么就是多分类数据集，但如果是一个连续的组合数据，那么就是一个有点分不清界限的复杂数据集，就好比，我们这个数据集是一条线段的集合，线段的长度是唯一的神秘变量，那么只要长度在一个范围内连续变化，那么这个集合里的线段你就会发现分散的很均匀，你几乎没有办法区分开他们，也没法给他们分成几类，但如果这个长度值只能选择1,3,5，那么当你观察这个数据集的时候，你会发现他们会聚在三堆儿里。如果这个线段的生成完全依靠的是计算机，那么每一堆儿都是完全重合的，但如果是人画的，就可能因为误差，没法完全重合，这没法重合的部分就是我们说的其他复杂因素，我们通常用一个高斯分布来把它代表了。好，我们已经基本清晰了，我们该给这个神秘组合一个形式化的描述了。<br>
假设有两个变量，<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-155" style="width: 3.336em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.158em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.313em 1003.16em 2.443em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-156"><span class="mi" id="MathJax-Span-157" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-158" style="font-family: MathJax_Main; padding-left: 0.301em;">∈</span><span class="mi" id="MathJax-Span-159" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mi" id="MathJax-Span-160" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.122em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-8">z\in ZS </script> 和 <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-161" style="width: 3.515em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.336em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.313em 1003.34em 2.443em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-162"><span class="mi" id="MathJax-Span-163" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-164" style="font-family: MathJax_Main; padding-left: 0.301em;">∈</span><span class="mi" id="MathJax-Span-165" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-166" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.122em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-9">x \in XS</script>，存在一个确定性函数族<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-167" style="width: 2.92em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.741em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1002.62em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-168"><span class="mi" id="MathJax-Span-169" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-170" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-171" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-172" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-173" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-174" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-10"> f(z;\theta)</script>，族中的每个函数由<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-175" style="width: 2.622em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.503em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.313em 1002.44em 2.443em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-176"><span class="mi" id="MathJax-Span-177" style="font-family: MathJax_Math-italic;">θ</span><span class="mo" id="MathJax-Span-178" style="font-family: MathJax_Main; padding-left: 0.301em;">∈</span><span class="mi" id="MathJax-Span-179" style="font-family: MathJax_Main; padding-left: 0.301em;">Θ</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.122em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-11">\theta \in \Theta</script>唯一确定，<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-180" style="width: 8.396em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.979em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.313em 1007.98em 2.562em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-181"><span class="mi" id="MathJax-Span-182" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-183" style="font-family: MathJax_Main; padding-left: 0.301em;">:</span><span class="mi" id="MathJax-Span-184" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">Z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mi" id="MathJax-Span-185" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-186" style="font-family: MathJax_Main; padding-left: 0.241em;">×</span><span class="mi" id="MathJax-Span-187" style="font-family: MathJax_Main; padding-left: 0.241em;">Θ</span><span class="mo" id="MathJax-Span-188" style="font-family: MathJax_Main; padding-left: 0.301em;">→</span><span class="mi" id="MathJax-Span-189" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-190" style="font-family: MathJax_Math-italic;">S<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.066em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-12">f: ZS \times \Theta \rightarrow XS </script>，当<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-191" style="width: 0.539em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1000.48em 2.324em -999.997em); top: -2.14em; left: 0em;"><span class="mrow" id="MathJax-Span-192"><span class="mi" id="MathJax-Span-193" style="font-family: MathJax_Math-italic;">θ</span></span><span style="display: inline-block; width: 0px; height: 2.146em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-13">\theta</script>固定，z是一个随机变量(概率密度函数为<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-194" style="width: 2.443em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.324em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1002.21em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-195"><span class="msubsup" id="MathJax-Span-196"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-197" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-198" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-199" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-200" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-201" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-14">P_z(z)</script>)时，那么<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-202" style="width: 2.92em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.741em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1002.62em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-203"><span class="mi" id="MathJax-Span-204" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-205" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-206" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-207" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-208" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-209" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-15">f(z;\theta)</script>就是定义在XS上的随机变量x，对应的概率密度函数可以写成g(x)。<br>
那么我们的目标就是优化<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-210" style="width: 0.539em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1000.48em 2.324em -999.997em); top: -2.14em; left: 0em;"><span class="mrow" id="MathJax-Span-211"><span class="mi" id="MathJax-Span-212" style="font-family: MathJax_Math-italic;">θ</span></span><span style="display: inline-block; width: 0px; height: 2.146em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-16">\theta</script>从而寻找到一个f，能够是随机变量x的采样和X非常的像。这里需要注意一下，x是一个变量,DX是已经现成的数据集，x不属于DX，我特意将名字起的有区分度。<br>
这样，f就是那个神秘力量通道，他把这些神秘力量的力度，通过f变成了x变量，而这个x变量就是与数据集DX具有直接关系的随机变量。</p>
<p>设一个数据集为DX，那么这个数据集存在的概率为<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-213" style="width: 3.574em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.396em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1003.28em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-214"><span class="msubsup" id="MathJax-Span-215"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-216" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-217" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-218" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-219" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-220" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-221" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-17">P_t(DX)</script>，则根据贝叶斯公式有：</p>
<div style="background-color: #eee; padding: 10px; text-align: center;"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-222" style="width: 15.063em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.348em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1014.35em 2.741em -999.997em); top: -2.259em; left: 0em;"><span class="mrow" id="MathJax-Span-223"><span class="msubsup" id="MathJax-Span-224"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-225" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-226" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-227" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-228" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-229" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-230" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-231" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mo" id="MathJax-Span-232" style="font-family: MathJax_Size1; vertical-align: 0em; padding-left: 0.301em;">∫<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="msubsup" id="MathJax-Span-233" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-234" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="texatom" id="MathJax-Span-235"><span class="mrow" id="MathJax-Span-236"><span class="mi" id="MathJax-Span-237" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span class="mi" id="MathJax-Span-238" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-239" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-240" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-241" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-242"><span class="mrow" id="MathJax-Span-243"><span class="mo" id="MathJax-Span-244" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-245" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-246" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-247" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-248" style="font-family: MathJax_Main;">)</span><span class="msubsup" id="MathJax-Span-249"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-250" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-251" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-252" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-253" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-254" style="font-family: MathJax_Main;">)</span><span class="mi" id="MathJax-Span-255" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-256" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.265em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-18">P_t(DX) = \int P_{xz}(DX|z;\theta)P_z(z)dz </script>; (1)</div>
<p>其中，<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-19-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-257" style="width: 5.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.539em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1005.42em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-258"><span class="msubsup" id="MathJax-Span-259"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-260" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="texatom" id="MathJax-Span-261"><span class="mrow" id="MathJax-Span-262"><span class="mi" id="MathJax-Span-263" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span class="mi" id="MathJax-Span-264" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-265" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-266" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-267" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-268"><span class="mrow" id="MathJax-Span-269"><span class="mo" id="MathJax-Span-270" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-271" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-272" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-273" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-274" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-19">P_{xz}(DX|z;\theta)</script>是我们新定义的概率密度函数，我们前面知道f是将z映射成x，而x又与DX有某种直接的关系，这个直接关系可以表示成<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-20-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-275" style="width: 4.646em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.408em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1004.29em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-276"><span class="msubsup" id="MathJax-Span-277"><span style="display: inline-block; position: relative; width: 1.134em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-278" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-279" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-280" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-281" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-282" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-283"><span class="mrow" id="MathJax-Span-284"><span class="mo" id="MathJax-Span-285" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-286" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-287" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-20">P_x(DX|x)</script>，那么<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-21-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-288" style="width: 13.515em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.86em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1012.8em 2.741em -999.997em); top: -2.259em; left: 0em;"><span class="mrow" id="MathJax-Span-289"><span class="msubsup" id="MathJax-Span-290"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-291" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-292" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-293" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-294" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-295" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-296" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-297" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mo" id="MathJax-Span-298" style="font-family: MathJax_Size1; vertical-align: 0em; padding-left: 0.301em;">∫<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="msubsup" id="MathJax-Span-299" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.134em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-300" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-301" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-302" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-303" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-304" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-305"><span class="mrow" id="MathJax-Span-306"><span class="mo" id="MathJax-Span-307" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-308" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-309" style="font-family: MathJax_Main;">)</span><span class="mi" id="MathJax-Span-310" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-311" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-312" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-313" style="font-family: MathJax_Main;">)</span><span class="mi" id="MathJax-Span-314" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-315" style="font-family: MathJax_Math-italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.265em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-21">P_t(DX) = \int P_x(DX|x)g(x)dx </script></p>
<p>这样我们就直接定义个<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-22-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-316" style="width: 5.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.539em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1005.42em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-317"><span class="msubsup" id="MathJax-Span-318"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-319" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="texatom" id="MathJax-Span-320"><span class="mrow" id="MathJax-Span-321"><span class="mi" id="MathJax-Span-322" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span class="mi" id="MathJax-Span-323" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-324" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-325" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-326" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-327"><span class="mrow" id="MathJax-Span-328"><span class="mo" id="MathJax-Span-329" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-330" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-331" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-332" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-333" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-22">P_{xz}(DX|z;\theta)</script> 来替换<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-23-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-334" style="width: 6.61em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.253em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1006.13em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-335"><span class="msubsup" id="MathJax-Span-336"><span style="display: inline-block; position: relative; width: 1.134em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-337" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-338" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-339" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-340" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-341" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-342"><span class="mrow" id="MathJax-Span-343"><span class="mo" id="MathJax-Span-344" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-345" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-346" style="font-family: MathJax_Main;">)</span><span class="mi" id="MathJax-Span-347" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-348" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-349" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-350" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-23">P_x(DX|x)g(x)</script>，从而表示z与DX的关系了。</p>
<p>好了，其实公式(1)就是我们的神秘力量与观察到的数据集之间的神秘关系，这个关系的意思我们直白的说就是：当隐秘变量按照某种规律存在时，就非常容易产生现在我们看到的这个数据集。那么，我们要做的工作就是当我们假定有n个神秘力量时，我们能够找到一个神奇的函数f，将神秘力量的变化转化成神奇的x的变化，这个x能够轻而易举地生成数据集DX。<br>
从上面的描述里面我们看到，f是生成转换函数，公式(1)不表示这种转换关系，而是这种关系的最大似然估计(maximum likelihood)，它的意思是找到最有可能生成DX这个数据集的主导函数f。</p>
<p>接下来我们回到讨论<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-24-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-351" style="width: 5.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.539em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1005.42em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-352"><span class="msubsup" id="MathJax-Span-353"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-354" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="texatom" id="MathJax-Span-355"><span class="mrow" id="MathJax-Span-356"><span class="mi" id="MathJax-Span-357" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span class="mi" id="MathJax-Span-358" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-359" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-360" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-361" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-362"><span class="mrow" id="MathJax-Span-363"><span class="mo" id="MathJax-Span-364" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-365" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-366" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-367" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-368" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-24">P_{xz}(DX|z;\theta)</script>这个概率密度函数上来，我们前面说过，如果z是全部的神秘力量，那么它产生的变量x就一定固定的，即当z取值固定时，x取值固定，但是现实中还有很多其他的因素，因而x的取值还与他们有关，他们的影响力，最终反映成了高斯函数，所以我们大胆假定<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-25-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-369" style="width: 1.491em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1001.43em 2.443em -999.997em); top: -2.08em; left: 0em;"><span class="mrow" id="MathJax-Span-370"><span class="msubsup" id="MathJax-Span-371"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-372" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="texatom" id="MathJax-Span-373"><span class="mrow" id="MathJax-Span-374"><span class="mi" id="MathJax-Span-375" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span class="mi" id="MathJax-Span-376" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.086em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-25">P_{xz}</script>是一个高斯分布的概率密度函数，即<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-26-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-377" style="width: 17.146em; display: inline-block;"><span style="display: inline-block; position: relative; width: 16.313em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.193em 1016.19em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-378"><span class="msubsup" id="MathJax-Span-379"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-380" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="texatom" id="MathJax-Span-381"><span class="mrow" id="MathJax-Span-382"><span class="mi" id="MathJax-Span-383" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span class="mi" id="MathJax-Span-384" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-385" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-386" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-387" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-388"><span class="mrow" id="MathJax-Span-389"><span class="mo" id="MathJax-Span-390" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-391" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-392" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-393" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-394" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-395" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mi" id="MathJax-Span-396" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-397" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-398" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-399" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-400"><span class="mrow" id="MathJax-Span-401"><span class="mo" id="MathJax-Span-402" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-403" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-404" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-405" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-406" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-407" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-408" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-409" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-410" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.6em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-411" style="font-family: MathJax_Math-italic;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="mn" id="MathJax-Span-412" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-413" style="font-family: MathJax_Main; padding-left: 0.241em;">∗</span><span class="mi" id="MathJax-Span-414" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-415" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.253em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-26">P_{xz}(DX|z;\theta) = N(DX|f(x;\theta), \sigma^2 * I)</script></p>
<p>注意z的分布我们依然是未知的。</p>
<p>假定我们知道z现在取某一个或几个特定值，那么我们就可以通过Gradient Descent来找到一个<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-27-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-416" style="width: 0.539em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1000.48em 2.324em -999.997em); top: -2.14em; left: 0em;"><span class="mrow" id="MathJax-Span-417"><span class="mi" id="MathJax-Span-418" style="font-family: MathJax_Math-italic;">θ</span></span><span style="display: inline-block; width: 0px; height: 2.146em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-27">\theta</script>尽量满足z能够以极高的概率生成我们希望的数据集DX。再一推广，就变成了，z取值某一范围，但去几个特定值或某一取值范围是就面临z各种取值的概率问题，我们回头再讨论这个棘手的问题，你现在只要知道冥冥之中，我们似乎可以通过学习参数<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-28-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-419" style="width: 0.539em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1000.48em 2.324em -999.997em); top: -2.14em; left: 0em;"><span class="mrow" id="MathJax-Span-420"><span class="mi" id="MathJax-Span-421" style="font-family: MathJax_Math-italic;">θ</span></span><span style="display: inline-block; width: 0px; height: 2.146em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-28">\theta</script>寻找最优解就行了。</p>
<p>OK，我们还要说一个关键问题，就是我们确信f是存在的，我们认为变量与神秘变量之间的关系一定可以用一个函数来表示。</p>
<h3>2. 变分自编码器(VAE)</h3>
<p>本节，我们探讨如何最大化公式(1)。首先，我们要讨论怎样确定神秘变量z，即z应该有几个维度，每个维度的作用域是什么？更为较真的，我们可能甚至要追究每一维度都代表什么？他们之间是不是独立的？每个维度的概率分布是什么样的？</p>
<p>如果我们沿着这个思路进行下去，就会陷入泥潭，我们可以巧妙地避开这些问题，关键就在于让他们继续保持“神秘”！</p>
<p>我们不关心每一个维度代表什么含义，我们只假定存在这么一群相互独立的变量，维度我们也回到之前的讨论，我们虽然不知道有多少，我们可以假定有n个主要因素，n可以定的大一点，比如假设有4个主因素，而我们假定有10个，那么最后训练出来，可能有6个长期是0。最后的问题需要详细讨论一下，比较复杂，就是z的概率分布和取值问题。</p>
<p>既然z是什么都不知道，我们是不是可以寻找一组新的神秘变量w，让这个w服从标准正态分布<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-29-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-422" style="width: 3.277em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.098em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1002.98em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-423"><span class="mi" id="MathJax-Span-424" style="font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-425" style="font-family: MathJax_Main;">(</span><span class="mn" id="MathJax-Span-426" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-427" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-428" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-429" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-29">N(0, I)</script>。<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-30-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-430" style="width: 0.539em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.313em 1000.48em 2.324em -999.997em); top: -2.14em; left: 0em;"><span class="mrow" id="MathJax-Span-431"><span class="mi" id="MathJax-Span-432" style="font-family: MathJax_Math-italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.146em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-30">I</script>是单位矩阵，然后这个w可以通过n个复杂函数，转换成z呢？有了神经网络这些也是可行的，假设这些复杂函数分别是<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-31-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-433" style="width: 6.134em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.836em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.313em 1005.84em 2.562em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-434"><span class="msubsup" id="MathJax-Span-435"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.098em 1000.54em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-436" style="font-family: MathJax_Math-italic;">h</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-437" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-438" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-439" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.098em 1000.54em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-440" style="font-family: MathJax_Math-italic;">h</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-441" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-442" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-443" style="font-family: MathJax_Main; padding-left: 0.182em;">…</span><span class="mo" id="MathJax-Span-444" style="font-family: MathJax_Main; padding-left: 0.182em;">,</span><span class="msubsup" id="MathJax-Span-445" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.098em 1000.54em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-446" style="font-family: MathJax_Math-italic;">h</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mi" id="MathJax-Span-447" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.066em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-31">h_1, h_2, …, h_n</script>，那么有<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-32-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-448" style="width: 13.455em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.801em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1012.68em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-449"><span class="msubsup" id="MathJax-Span-450"><span style="display: inline-block; position: relative; width: 0.896em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.48em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-451" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mn" id="MathJax-Span-452" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-453" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="msubsup" id="MathJax-Span-454" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.098em 1000.54em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-455" style="font-family: MathJax_Math-italic;">h</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mn" id="MathJax-Span-456" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-457" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-458"><span style="display: inline-block; position: relative; width: 1.134em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.72em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-459" style="font-family: MathJax_Math-italic;">w</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.717em;"><span class="mn" id="MathJax-Span-460" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-461" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-462" style="font-family: MathJax_Main;">,</span><span class="mo" id="MathJax-Span-463" style="font-family: MathJax_Main; padding-left: 0.182em;">…</span><span class="mo" id="MathJax-Span-464" style="font-family: MathJax_Main; padding-left: 0.182em;">,</span><span class="msubsup" id="MathJax-Span-465" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.48em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-466" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.479em;"><span class="mi" id="MathJax-Span-467" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-468" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="msubsup" id="MathJax-Span-469" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.098em 1000.54em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-470" style="font-family: MathJax_Math-italic;">h</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.598em;"><span class="mi" id="MathJax-Span-471" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-472" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-473"><span style="display: inline-block; position: relative; width: 1.193em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.72em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-474" style="font-family: MathJax_Math-italic;">w</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.717em;"><span class="mi" id="MathJax-Span-475" style="font-size: 70.7%; font-family: MathJax_Math-italic;">n</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-476" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-32">z_1 = h_1(w_1), …, z_n = h_n(w_n) </script>。而z的具体分布是什么，取值范围是多少我们也不用关心了，反正由一个神经网络去算。回想一下<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-33-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-477" style="width: 16.67em; display: inline-block;"><span style="display: inline-block; position: relative; width: 15.836em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.193em 1015.72em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-478"><span class="mi" id="MathJax-Span-479" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-480" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-481" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-482" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-483"><span class="mrow" id="MathJax-Span-484"><span class="mo" id="MathJax-Span-485" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-486" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-487" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-488" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-489" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-490" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mi" id="MathJax-Span-491" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-492" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-493" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-494" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-495"><span class="mrow" id="MathJax-Span-496"><span class="mo" id="MathJax-Span-497" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-498" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-499" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-500" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-501" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-502" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-503" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-504" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-505" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.6em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-506" style="font-family: MathJax_Math-italic;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="mn" id="MathJax-Span-507" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-508" style="font-family: MathJax_Main; padding-left: 0.241em;">×</span><span class="mi" id="MathJax-Span-509" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-510" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.253em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-33">P(DX|z;\theta) = N(DX|f(z;\theta), \sigma^2 \times I)</script>，我们可以想象，如果<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-34-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-511" style="width: 2.92em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.741em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1002.62em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-512"><span class="mi" id="MathJax-Span-513" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-514" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-515" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-516" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-517" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-518" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-34">f(z;\theta)</script>是一个多层神经网络，那么前几层就用来将标准正态分布的w变成真正的隐变量z，后面几层才是将z映射成x，但由于w和z是一一对应关系，所以w某种意义上说也是一股神秘力量。就演化成w和x的关系了，既然w也是神秘变量，我们就还是叫回z，把那个之前我们认为的神秘变量z忘掉吧。</p>
<p>好，更加波澜壮阔的历程要开始了，请坐好。</p>
<p>我们现在已经有了</p>
<p><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-35-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-519" style="width: 7.146em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.789em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1006.67em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-520"><span class="msubsup" id="MathJax-Span-521"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-522" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-523" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-524" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-525" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-526" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-527" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mi" id="MathJax-Span-528" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-529" style="font-family: MathJax_Main;">(</span><span class="mn" id="MathJax-Span-530" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-531" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-532" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-533" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-35">P_z(z) = N(0, I)</script>,</p>
<p><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-36-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-534" style="width: 17.146em; display: inline-block;"><span style="display: inline-block; position: relative; width: 16.313em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.193em 1016.19em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-535"><span class="msubsup" id="MathJax-Span-536"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-537" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="texatom" id="MathJax-Span-538"><span class="mrow" id="MathJax-Span-539"><span class="mi" id="MathJax-Span-540" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span class="mi" id="MathJax-Span-541" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-542" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-543" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-544" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-545"><span class="mrow" id="MathJax-Span-546"><span class="mo" id="MathJax-Span-547" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-548" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-549" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-550" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-551" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-552" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mi" id="MathJax-Span-553" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-554" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-555" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-556" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-557"><span class="mrow" id="MathJax-Span-558"><span class="mo" id="MathJax-Span-559" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-560" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-561" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-562" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-563" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-564" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-565" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-566" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-567" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.6em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-568" style="font-family: MathJax_Math-italic;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="mn" id="MathJax-Span-569" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-570" style="font-family: MathJax_Main; padding-left: 0.241em;">∗</span><span class="mi" id="MathJax-Span-571" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-572" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.253em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-36">P_{xz}(DX|z;\theta) = N(DX|f(x;\theta), \sigma^2 * I)</script>,</p>
<p><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-37-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-573" style="width: 15.063em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.348em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1014.35em 2.741em -999.997em); top: -2.259em; left: 0em;"><span class="mrow" id="MathJax-Span-574"><span class="msubsup" id="MathJax-Span-575"><span style="display: inline-block; position: relative; width: 0.955em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-576" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-577" style="font-size: 70.7%; font-family: MathJax_Math-italic;">t</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-578" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-579" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-580" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-581" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-582" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mo" id="MathJax-Span-583" style="font-family: MathJax_Size1; vertical-align: 0em; padding-left: 0.301em;">∫<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="msubsup" id="MathJax-Span-584" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-585" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="texatom" id="MathJax-Span-586"><span class="mrow" id="MathJax-Span-587"><span class="mi" id="MathJax-Span-588" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span class="mi" id="MathJax-Span-589" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-590" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-591" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-592" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-593"><span class="mrow" id="MathJax-Span-594"><span class="mo" id="MathJax-Span-595" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-596" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-597" style="font-family: MathJax_Main;">;</span><span class="mi" id="MathJax-Span-598" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">θ</span><span class="mo" id="MathJax-Span-599" style="font-family: MathJax_Main;">)</span><span class="msubsup" id="MathJax-Span-600"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-601" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-602" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-603" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-604" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-605" style="font-family: MathJax_Main;">)</span><span class="mi" id="MathJax-Span-606" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-607" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.265em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-37">P_t(DX) = \int P_{xz}(DX|z;\theta)P_z(z)dz </script>,</p>
<p>我们现在就可以专心攻击f了，由于f是一个神经网络，我们就可以梯度下降了。但是另一个关键点在于我们怎么知道这个f生成的样本，和DX更加像呢？如果这个问题解决不了，我们根本都不知道我们的目标函数是什么。</p>
<h3>3. 设定目标函数</h3>
<p>我们先来定义个函数 Q(z|DX)，数据集DX的发生，z的概率密度函数，即如果DX发生，Q(z|DX)就是z的概率密度函数，比如一个数字图像0，z隐式代表0的概率就很大，而那些代表1的概率就很小。如果我们有办法搞到这个Q的函数表示，我们就可以直接使用DX算出z的最佳值了。为什么会引入Q呢？其实道理很简单，如果DX是x这个变量直接生成的，要想找回x的模型，就要引入一个概率密度函数T(x|DX)，亦即针对DX，我们要找到一个x的最佳概率密度函数。<br>
现在的问题就变成了，我们可以根据DX计算出Q(z|DX)来让他尽量与理想的Pz(z|DX)尽量的趋同，这就要引入更加高深的功夫了——相对熵，也叫KL散度(Kullback-Leibler divergence,用 <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-38-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-608" style="width: 0.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.777em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.313em 1000.78em 2.324em -999.997em); top: -2.14em; left: 0em;"><span class="mrow" id="MathJax-Span-609"><span class="texatom" id="MathJax-Span-610"><span class="mrow" id="MathJax-Span-611"><span class="mi" id="MathJax-Span-612" style="font-family: MathJax_Caligraphic;">D</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.146em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-38">\mathcal{D}</script>表示)。</p>
<p>离散概率分布的KL公式</p>
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-39-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-613" style="width: 12.384em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.789em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(0.955em 1011.79em 3.098em -999.997em); top: -2.259em; left: 0em;"><span class="mrow" id="MathJax-Span-614"><span class="mi" id="MathJax-Span-615" style="font-family: MathJax_Math-italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mi" id="MathJax-Span-616" style="font-family: MathJax_Math-italic;">L</span><span class="mo" id="MathJax-Span-617" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-618" style="font-family: MathJax_Math-italic;">p</span><span class="mo" id="MathJax-Span-619" style="font-family: MathJax_Main; padding-left: 0.301em;">∥</span><span class="mi" id="MathJax-Span-620" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-621" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-622" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mo" id="MathJax-Span-623" style="font-family: MathJax_Size1; vertical-align: 0em; padding-left: 0.301em;">∑</span><span class="mi" id="MathJax-Span-624" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">p</span><span class="mo" id="MathJax-Span-625" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-626" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-627" style="font-family: MathJax_Main;">)</span><span class="mi" id="MathJax-Span-628" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-629" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-630" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mfrac" id="MathJax-Span-631"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px; margin-right: 0.122em; margin-left: 0.122em;"><span style="position: absolute; clip: rect(3.277em 1001.25em 4.348em -999.997em); top: -4.58em; left: 50%; margin-left: -0.652em;"><span class="mrow" id="MathJax-Span-632"><span class="mi" id="MathJax-Span-633" style="font-size: 70.7%; font-family: MathJax_Math-italic;">p</span><span class="mo" id="MathJax-Span-634" style="font-size: 70.7%; font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-635" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-636" style="font-size: 70.7%; font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.277em 1001.19em 4.348em -999.997em); top: -3.509em; left: 50%; margin-left: -0.652em;"><span class="mrow" id="MathJax-Span-637"><span class="mi" id="MathJax-Span-638" style="font-size: 70.7%; font-family: MathJax_Math-italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-639" style="font-size: 70.7%; font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-640" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-641" style="font-size: 70.7%; font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.836em 1001.43em 1.253em -999.997em); top: -1.307em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.432em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.265em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.747em; border-left: 0px solid; width: 0px; height: 2.003em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-39"> KL(p \parallel q) = \sum p(x)log \frac{p(x)}{q(x)} </script>
<p>连续概率分布的KL公式</p>
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-40-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-642" style="width: 13.098em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.443em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(0.955em 1012.38em 3.098em -999.997em); top: -2.259em; left: 0em;"><span class="mrow" id="MathJax-Span-643"><span class="mi" id="MathJax-Span-644" style="font-family: MathJax_Math-italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mi" id="MathJax-Span-645" style="font-family: MathJax_Math-italic;">L</span><span class="mo" id="MathJax-Span-646" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-647" style="font-family: MathJax_Math-italic;">p</span><span class="mo" id="MathJax-Span-648" style="font-family: MathJax_Main; padding-left: 0.301em;">∥</span><span class="mi" id="MathJax-Span-649" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-650" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-651" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mo" id="MathJax-Span-652" style="font-family: MathJax_Size1; vertical-align: 0em; padding-left: 0.301em;">∫<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mi" id="MathJax-Span-653" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">p</span><span class="mo" id="MathJax-Span-654" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-655" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-656" style="font-family: MathJax_Main;">)</span><span class="mi" id="MathJax-Span-657" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-658" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-659" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mfrac" id="MathJax-Span-660"><span style="display: inline-block; position: relative; width: 1.432em; height: 0px; margin-right: 0.122em; margin-left: 0.122em;"><span style="position: absolute; clip: rect(3.277em 1001.25em 4.348em -999.997em); top: -4.58em; left: 50%; margin-left: -0.652em;"><span class="mrow" id="MathJax-Span-661"><span class="mi" id="MathJax-Span-662" style="font-size: 70.7%; font-family: MathJax_Math-italic;">p</span><span class="mo" id="MathJax-Span-663" style="font-size: 70.7%; font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-664" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-665" style="font-size: 70.7%; font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.277em 1001.19em 4.348em -999.997em); top: -3.509em; left: 50%; margin-left: -0.652em;"><span class="mrow" id="MathJax-Span-666"><span class="mi" id="MathJax-Span-667" style="font-size: 70.7%; font-family: MathJax_Math-italic;">q<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-668" style="font-size: 70.7%; font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-669" style="font-size: 70.7%; font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-670" style="font-size: 70.7%; font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.836em 1001.43em 1.253em -999.997em); top: -1.307em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.432em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span></span></span><span class="mi" id="MathJax-Span-671" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-672" style="font-family: MathJax_Math-italic;">x</span></span><span style="display: inline-block; width: 0px; height: 2.265em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.747em; border-left: 0px solid; width: 0px; height: 2.003em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-40"> KL(p \parallel q) = \int p(x)log \frac{p(x)}{q(x)}dx </script>
<p><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-41-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-673" style="width: 4.467em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.229em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1004.11em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-674"><span class="msubsup" id="MathJax-Span-675"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-676" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-677" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-678" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-679" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-680"><span class="mrow" id="MathJax-Span-681"><span class="mo" id="MathJax-Span-682" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-683" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-684" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-685" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-41">P_z(z|DX)</script>和<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-42-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-686" style="width: 4.229em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.991em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1003.87em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-687"><span class="mi" id="MathJax-Span-688" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-689" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-690" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-691"><span class="mrow" id="MathJax-Span-692"><span class="mo" id="MathJax-Span-693" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-694" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-695" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-696" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-42">Q(z|DX)</script>的KL散度为</p>
<p><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-43-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-697" style="width: 30.182em; display: inline-block;"><span style="display: inline-block; position: relative; width: 28.753em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1028.63em 2.741em -999.997em); top: -2.259em; left: 0em;"><span class="mrow" id="MathJax-Span-698"><span class="texatom" id="MathJax-Span-699"><span class="mrow" id="MathJax-Span-700"><span class="mi" id="MathJax-Span-701" style="font-family: MathJax_Caligraphic;">D</span></span></span><span class="mo" id="MathJax-Span-702" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-703" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-704" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-705" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-706"><span class="mrow" id="MathJax-Span-707"><span class="mo" id="MathJax-Span-708" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-709" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-710" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-711" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-712" style="font-family: MathJax_Main; padding-left: 0.301em;">∥</span><span class="msubsup" id="MathJax-Span-713" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-714" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-715" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-716" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-717" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-718"><span class="mrow" id="MathJax-Span-719"><span class="mo" id="MathJax-Span-720" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-721" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-722" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-723" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-724" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-725" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mo" id="MathJax-Span-726" style="font-family: MathJax_Size1; vertical-align: 0em; padding-left: 0.301em;">∫<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mi" id="MathJax-Span-727" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">Q</span><span class="mo" id="MathJax-Span-728" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-729" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-730"><span class="mrow" id="MathJax-Span-731"><span class="mo" id="MathJax-Span-732" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-733" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-734" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-735" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-736" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-737" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-738" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-739" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-740" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-741" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-742" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-743"><span class="mrow" id="MathJax-Span-744"><span class="mo" id="MathJax-Span-745" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-746" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-747" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-748" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-749" style="font-family: MathJax_Main;">–</span><span class="mi" id="MathJax-Span-750" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">l</span><span class="mi" id="MathJax-Span-751" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-752" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="msubsup" id="MathJax-Span-753"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-754" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-755" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-756" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-757" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-758"><span class="mrow" id="MathJax-Span-759"><span class="mo" id="MathJax-Span-760" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-761" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-762" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-763" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-764" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.265em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-43">\mathcal{D}[Q(z|DX)\parallel P_z(z|DX)] = \int Q(z|DX)[logQ(z|DX) – logP_z(z|DX)] </script><br>
也可写成<br>
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-44-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-765" style="width: 27.563em; display: inline-block;"><span style="display: inline-block; position: relative; width: 26.253em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1026.13em 2.682em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-766"><span class="texatom" id="MathJax-Span-767"><span class="mrow" id="MathJax-Span-768"><span class="mi" id="MathJax-Span-769" style="font-family: MathJax_Caligraphic;">D</span></span></span><span class="mo" id="MathJax-Span-770" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-771" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-772" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-773" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-774"><span class="mrow" id="MathJax-Span-775"><span class="mo" id="MathJax-Span-776" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-777" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-778" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-779" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-780" style="font-family: MathJax_Main; padding-left: 0.301em;">∥</span><span class="msubsup" id="MathJax-Span-781" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-782" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-783" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-784" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-785" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-786"><span class="mrow" id="MathJax-Span-787"><span class="mo" id="MathJax-Span-788" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-789" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-790" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-791" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-792" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-793" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="msubsup" id="MathJax-Span-794" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 2.265em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-795" style="font-family: MathJax_Math-italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.717em;"><span class="texatom" id="MathJax-Span-796"><span class="mrow" id="MathJax-Span-797"><span class="mi" id="MathJax-Span-798" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-799" style="font-size: 70.7%; font-family: MathJax_Main;">∼</span><span class="mi" id="MathJax-Span-800" style="font-size: 70.7%; font-family: MathJax_Math-italic;">Q</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-801" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-802" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-803" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-804" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-805" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-806" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-807" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-808"><span class="mrow" id="MathJax-Span-809"><span class="mo" id="MathJax-Span-810" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-811" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-812" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-813" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-814" style="font-family: MathJax_Main;">–</span><span class="mi" id="MathJax-Span-815" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">l</span><span class="mi" id="MathJax-Span-816" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-817" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="msubsup" id="MathJax-Span-818"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-819" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-820" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-821" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-822" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-823"><span class="mrow" id="MathJax-Span-824"><span class="mo" id="MathJax-Span-825" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-826" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-827" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-828" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-829" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-44">\mathcal{D}[Q(z|DX)\parallel P_z(z|DX)] = E_{z\sim Q}[logQ(z|DX) – logP_z(z|DX)] </script></p>
<p>通过贝叶斯公式</p>
<p><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-45-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-830" style="width: 10.777em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.241em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(0.896em 1010.24em 3.039em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-831"><span class="msubsup" id="MathJax-Span-832"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-833" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-834" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-835" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-836" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-837"><span class="mrow" id="MathJax-Span-838"><span class="mo" id="MathJax-Span-839" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-840" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-841" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-842" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-843" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mfrac" id="MathJax-Span-844" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 4.348em; height: 0px; margin-right: 0.122em; margin-left: 0.122em;"><span style="position: absolute; clip: rect(3.277em 1004.17em 4.348em -999.997em); top: -4.58em; left: 50%; margin-left: -2.08em;"><span class="mrow" id="MathJax-Span-845"><span class="mi" id="MathJax-Span-846" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-847" style="font-size: 70.7%; font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-848" style="font-size: 70.7%; font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-849" style="font-size: 70.7%; font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-850"><span class="mrow" id="MathJax-Span-851"><span class="mo" id="MathJax-Span-852" style="font-size: 70.7%; font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-853" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-854" style="font-size: 70.7%; font-family: MathJax_Main;">)</span><span class="mi" id="MathJax-Span-855" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-856" style="font-size: 70.7%; font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-857" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-858" style="font-size: 70.7%; font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.277em 1002.21em 4.348em -999.997em); top: -3.509em; left: 50%; margin-left: -1.128em;"><span class="mrow" id="MathJax-Span-859"><span class="mi" id="MathJax-Span-860" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-861" style="font-size: 70.7%; font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-862" style="font-size: 70.7%; font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-863" style="font-size: 70.7%; font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-864" style="font-size: 70.7%; font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.836em 1004.35em 1.253em -999.997em); top: -1.307em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 4.348em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.747em; border-left: 0px solid; width: 0px; height: 2.003em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-45">P_z(z|DX) = \frac{P(DX|z)P(z)}{P(DX)}</script><br>
这里不再给P起名，其实Pz(z)直接写成P(z)也是没有任何问题的，前面只是为了区分概念，括号中的内容已经足以表意。</p>
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-46-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-865" style="width: 37.384em; display: inline-block;"><span style="display: inline-block; position: relative; width: 35.598em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1035.48em 2.682em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-866"><span class="texatom" id="MathJax-Span-867"><span class="mrow" id="MathJax-Span-868"><span class="mi" id="MathJax-Span-869" style="font-family: MathJax_Caligraphic;">D</span></span></span><span class="mo" id="MathJax-Span-870" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-871" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-872" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-873" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-874"><span class="mrow" id="MathJax-Span-875"><span class="mo" id="MathJax-Span-876" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-877" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-878" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-879" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-880" style="font-family: MathJax_Main; padding-left: 0.301em;">∥</span><span class="msubsup" id="MathJax-Span-881" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-882" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.658em;"><span class="mi" id="MathJax-Span-883" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-884" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-885" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-886"><span class="mrow" id="MathJax-Span-887"><span class="mo" id="MathJax-Span-888" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-889" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-890" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-891" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-892" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-893" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="msubsup" id="MathJax-Span-894" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 2.265em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-895" style="font-family: MathJax_Math-italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.717em;"><span class="texatom" id="MathJax-Span-896"><span class="mrow" id="MathJax-Span-897"><span class="mi" id="MathJax-Span-898" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-899" style="font-size: 70.7%; font-family: MathJax_Main;">∼</span><span class="mi" id="MathJax-Span-900" style="font-size: 70.7%; font-family: MathJax_Math-italic;">Q</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-901" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-902" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-903" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-904" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-905" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-906" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-907" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-908"><span class="mrow" id="MathJax-Span-909"><span class="mo" id="MathJax-Span-910" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-911" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-912" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-913" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-914" style="font-family: MathJax_Main;">–</span><span class="mi" id="MathJax-Span-915" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">l</span><span class="mi" id="MathJax-Span-916" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-917" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-918" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-919" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-920" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-921" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-922"><span class="mrow" id="MathJax-Span-923"><span class="mo" id="MathJax-Span-924" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-925" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-926" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-927" style="font-family: MathJax_Main;">–</span><span class="mi" id="MathJax-Span-928" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">l</span><span class="mi" id="MathJax-Span-929" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-930" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-931" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-932" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-933" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-934" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-935" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-936" style="font-family: MathJax_Main; padding-left: 0.241em;">+</span><span class="mi" id="MathJax-Span-937" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">l</span><span class="mi" id="MathJax-Span-938" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-939" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-940" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-941" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-942" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-943" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-944" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-46">\mathcal{D}[Q(z|DX)\parallel P_z(z|DX)] = E_{z\sim Q}[logQ(z|DX) – logP(DX|z) – logP(z)] + logP(DX) </script>
<p>因为<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-47-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-945" style="width: 4.705em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.467em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1004.35em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-946"><span class="mi" id="MathJax-Span-947" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-948" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-949" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-950" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-951" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-952" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-953" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-954" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-47">logP(DX)</script>与z变量无关，直接就可以提出来了，进而得到闪闪发光的公式(2)：</p>
<div style="background-color: #eee; padding: 10px; text-align: center;"><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-48-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-955" style="width: 35.658em; display: inline-block;"><span style="display: inline-block; position: relative; width: 33.932em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1033.81em 2.682em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-956"><span class="mi" id="MathJax-Span-957" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-958" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-959" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-960" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-961" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-962" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-963" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-964" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-965" style="font-family: MathJax_Main;">–</span><span class="texatom" id="MathJax-Span-966" style="padding-left: 0.182em;"><span class="mrow" id="MathJax-Span-967"><span class="mi" id="MathJax-Span-968" style="font-family: MathJax_Caligraphic;">D</span></span></span><span class="mo" id="MathJax-Span-969" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-970" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-971" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-972" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-973"><span class="mrow" id="MathJax-Span-974"><span class="mo" id="MathJax-Span-975" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-976" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-977" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-978" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-979" style="font-family: MathJax_Main; padding-left: 0.301em;">∥</span><span class="mi" id="MathJax-Span-980" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-981" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-982" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-983"><span class="mrow" id="MathJax-Span-984"><span class="mo" id="MathJax-Span-985" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-986" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-987" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-988" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-989" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-990" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="msubsup" id="MathJax-Span-991" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 2.265em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-992" style="font-family: MathJax_Math-italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.717em;"><span class="texatom" id="MathJax-Span-993"><span class="mrow" id="MathJax-Span-994"><span class="mi" id="MathJax-Span-995" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-996" style="font-size: 70.7%; font-family: MathJax_Main;">∼</span><span class="mi" id="MathJax-Span-997" style="font-size: 70.7%; font-family: MathJax_Math-italic;">Q</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-998" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-999" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-1000" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-1001" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1002" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1003" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1004" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-1005" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1006"><span class="mrow" id="MathJax-Span-1007"><span class="mo" id="MathJax-Span-1008" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1009" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1010" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1011" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-1012" style="font-family: MathJax_Main;">–</span><span class="texatom" id="MathJax-Span-1013" style="padding-left: 0.182em;"><span class="mrow" id="MathJax-Span-1014"><span class="mi" id="MathJax-Span-1015" style="font-family: MathJax_Caligraphic;">D</span></span></span><span class="mo" id="MathJax-Span-1016" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-1017" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-1018" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1019" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1020"><span class="mrow" id="MathJax-Span-1021"><span class="mo" id="MathJax-Span-1022" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1023" style="font-family: MathJax_Math-italic;">D</span><span class="mi" id="MathJax-Span-1024" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1025" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1026" style="font-family: MathJax_Main; padding-left: 0.301em;">∥</span><span class="mi" id="MathJax-Span-1027" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1028" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1029" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1030" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1031" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-48">logP(DX) – \mathcal{D}[Q(z|DX) \parallel P(z|DX)] = E_{z\sim Q}[logP(DX|z)] – \mathcal{D}[Q(z|DX) \parallel P(z)]</script>; (2)</div>
<p>公式(2)是VAE的核心公式，我们接下来分析一个这个公式。<br>
公式的左边有我们的优化目标P(DX)，同时携带了一个误差项，这个误差项反映了给定DX的情况下的真实分布Q与理想分布P的相对熵，当Q完全符合理想分布时，这个误差项就为0，而等式右边就是我们可以使用梯度下降进行优化的，这里面的Q(z|DX)特别像一个DX-&gt;z的编码器，P(DX|z)特别像z-&gt;DX的解码器，这就是VAE架构也被称为自编码器的原因。</p>
<p>由于DX早已不再有分歧，我们在这里把所有的DX都换成了X。</p>
<p>我们现在有公式(2)的拆分：<br>
– 左侧第一项：<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-49-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1032" style="width: 3.812em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.634em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1003.51em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1033"><span class="mi" id="MathJax-Span-1034" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-1035" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-1036" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1037" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1038" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1039" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1040" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-49">logP(X)</script><br>
– 左侧第二项：<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-50-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1041" style="width: 8.932em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.515em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1008.4em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1042"><span class="texatom" id="MathJax-Span-1043"><span class="mrow" id="MathJax-Span-1044"><span class="mi" id="MathJax-Span-1045" style="font-family: MathJax_Caligraphic;">D</span></span></span><span class="mo" id="MathJax-Span-1046" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1047" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-1048" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1049" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1050"><span class="mrow" id="MathJax-Span-1051"><span class="mo" id="MathJax-Span-1052" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1053" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1054" style="font-family: MathJax_Main; padding-left: 0.301em;">∥</span><span class="mi" id="MathJax-Span-1055" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1056" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1057" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1058"><span class="mrow" id="MathJax-Span-1059"><span class="mo" id="MathJax-Span-1060" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1061" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1062" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1063" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-50">\mathcal{D}(Q(z|X \parallel P(z|X))</script><br>
– 右边第一项：<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-51-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1064" style="width: 7.562em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.205em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1007.09em 2.682em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1065"><span class="msubsup" id="MathJax-Span-1066"><span style="display: inline-block; position: relative; width: 2.265em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-1067" style="font-family: MathJax_Math-italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.717em;"><span class="texatom" id="MathJax-Span-1068"><span class="mrow" id="MathJax-Span-1069"><span class="mi" id="MathJax-Span-1070" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1071" style="font-size: 70.7%; font-family: MathJax_Main;">∼</span><span class="mi" id="MathJax-Span-1072" style="font-size: 70.7%; font-family: MathJax_Math-italic;">Q</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-1073" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-1074" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-1075" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-1076" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1077" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1078" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1079" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1080"><span class="mrow" id="MathJax-Span-1081"><span class="mo" id="MathJax-Span-1082" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1083" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1084" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1085" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-51">E_{z\sim Q}[logP(X|z)] </script><br>
– 右边第二项：<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-52-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1086" style="width: 7.979em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.562em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1007.44em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1087"><span class="texatom" id="MathJax-Span-1088"><span class="mrow" id="MathJax-Span-1089"><span class="mi" id="MathJax-Span-1090" style="font-family: MathJax_Caligraphic;">D</span></span></span><span class="mo" id="MathJax-Span-1091" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-1092" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-1093" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1094" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1095"><span class="mrow" id="MathJax-Span-1096"><span class="mo" id="MathJax-Span-1097" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1098" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1099" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1100" style="font-family: MathJax_Main; padding-left: 0.301em;">∥</span><span class="mi" id="MathJax-Span-1101" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1102" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1103" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1104" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1105" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-52">\mathcal{D}[Q(z|X) \parallel P(z)]</script></p>
<p>还有下面这些：<br>
– <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-53-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1106" style="width: 6.848em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.491em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1006.37em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1107"><span class="mi" id="MathJax-Span-1108" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1109" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1110" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1111" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1112" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mi" id="MathJax-Span-1113" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1114" style="font-family: MathJax_Main;">(</span><span class="mn" id="MathJax-Span-1115" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-1116" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-1117" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1118" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-53">P(z) = N(0, I)</script>,<br>
– <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-54-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1119" style="width: 12.622em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.027em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.193em 1011.91em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1120"><span class="mi" id="MathJax-Span-1121" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1122" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1123" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1124"><span class="mrow" id="MathJax-Span-1125"><span class="mo" id="MathJax-Span-1126" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1127" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1128" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1129" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mi" id="MathJax-Span-1130" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1131" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1132" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1133"><span class="mrow" id="MathJax-Span-1134"><span class="mo" id="MathJax-Span-1135" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1136" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1137" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1138" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1139" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1140" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-1141" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.6em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-1142" style="font-family: MathJax_Math-italic;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="mn" id="MathJax-Span-1143" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-1144" style="font-family: MathJax_Main; padding-left: 0.241em;">∗</span><span class="mi" id="MathJax-Span-1145" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1146" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.253em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-54">P(X|z) = N(X|f(z), \sigma^2 * I)</script>,<br>
– <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-55-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1147" style="width: 12.503em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.908em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1011.79em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1148"><span class="mi" id="MathJax-Span-1149" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-1150" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1151" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1152"><span class="mrow" id="MathJax-Span-1153"><span class="mo" id="MathJax-Span-1154" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1155" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1156" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1157" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mi" id="MathJax-Span-1158" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1159" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1160" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1161"><span class="mrow" id="MathJax-Span-1162"><span class="mo" id="MathJax-Span-1163" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1164" style="font-family: MathJax_Math-italic;">μ</span><span class="mo" id="MathJax-Span-1165" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1166" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1167" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1168" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-1169" style="font-family: MathJax_Main; padding-left: 0.182em;">Σ</span><span class="mo" id="MathJax-Span-1170" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1171" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1172" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1173" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-55">Q(z|X) = N(z|\mu (X), \Sigma (X)) </script></p>
<p>我们再明确一下每个概率的含义：<br>
– <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-56-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1174" style="width: 2.503em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.384em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1002.26em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1175"><span class="mi" id="MathJax-Span-1176" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1177" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1178" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1179" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-56">P(X)</script>——当前这个数据集发生的概率，但是他的概率分布我们是不知道，比如，X的空间是一个一维有限空间，比如只能取值0-9的整数，而我们的 X = { 0, 1, 2, 3, 4 }，那么当概率分布是均匀的时候，P(X)就是0.5，但是如果不是这个分布，就不好说是什么了，没准是0.1, 0.01，都有可能。P(X)是一个函数，就好像是一个人，当你问他X=某个值的时候，他能告诉发生的概率。<br>
– <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-57-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1180" style="width: 2.146em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.027em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1001.91em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1181"><span class="mi" id="MathJax-Span-1182" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1183" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1184" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1185" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-57">P(z)</script> —— 这个z是我们后来引入的那个w，还记得吗？他们都已经归顺了正态分布，如果z是一维的，那他就是标准正态分布N(0, I)。<br>
– <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-58-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1186" style="width: 3.277em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.098em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1002.98em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1187"><span class="mi" id="MathJax-Span-1188" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1189" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1190" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1191"><span class="mrow" id="MathJax-Span-1192"><span class="mo" id="MathJax-Span-1193" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1194" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1195" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-58">P(X|z)</script> —— 这个函数的含义是如果z给定一个取值，那么就知道X取某个值的概率，还是举个例子，z是一个神奇的变量，可以控制在计算机屏幕上出现整个屏幕的红色并且控制其灰度，z服从N(0,1)分布，当z=0时代表纯正的红色，z越偏离0，屏幕的红色就越深，那么P(X|z)就表示z等于某个值时X=另一值的概率，由于计算机是精确控制的，没有额外的随机因素，所以如果z=0能够导致X取一个固定色值0xFF0000，那么P(X=0xFF0000|z=0)=1，P(x!=0xFF0000|z=0) = 0，但如果现实世界比较复杂附加其他的随机因素，那么就可能在z确定出来的X基础值之上做随机了。这就是我们之前讨论的，大数定理，<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-59-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1196" style="width: 12.741em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.146em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.193em 1012.03em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1197"><span class="mi" id="MathJax-Span-1198" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1199" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1200" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1201"><span class="mrow" id="MathJax-Span-1202"><span class="mo" id="MathJax-Span-1203" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1204" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1205" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1206" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mi" id="MathJax-Span-1207" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1208" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1209" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1210"><span class="mrow" id="MathJax-Span-1211"><span class="mo" id="MathJax-Span-1212" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1213" style="font-family: MathJax_Math-italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1214" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1215" style="font-family: MathJax_Math-italic;">x</span><span class="mo" id="MathJax-Span-1216" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1217" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-1218" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.074em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.6em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-1219" style="font-family: MathJax_Math-italic;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="mn" id="MathJax-Span-1220" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-1221" style="font-family: MathJax_Main; padding-left: 0.241em;">∗</span><span class="mi" id="MathJax-Span-1222" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1223" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.253em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-59">P(X|z) = N(X|f(x), \sigma^2 * I)</script>。f(z)就是X与z直接关系的写照。<br>
– <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-60-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1224" style="width: 3.277em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.098em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1002.98em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1225"><span class="mi" id="MathJax-Span-1226" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1227" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1228" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1229"><span class="mrow" id="MathJax-Span-1230"><span class="mo" id="MathJax-Span-1231" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1232" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1233" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-60">P(z|X)</script> —— 当X发生时，z的概率是多少呢？回到刚才计算机屏幕的例子，就非常简单了P(z=0|X=0xFF0000) = 1, P(z!=0|X=0xFF0000) = 0，但是由于概率的引入，X|z可以简化成高斯关系，相反，也可以简化高斯关系。这个解释对下面的Q同样适用。<br>
– <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-61-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1234" style="width: 2.146em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.027em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1001.91em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1235"><span class="mi" id="MathJax-Span-1236" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-1237" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1238" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1239" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-61">Q(z)</script> —— 对于Q的分析和P的分析是一样的，只不过Q和P的不同时，我们假定P是那个理想中的分布，是真正决定X的最终构成的背后真实力量，而Q是我们的亲儿子，试着弄出来的赝品，并且希望在现实世界通过神经网络，让这个赝品能够尝试控制产生X。当这个Q真的行为和我们理想中的P一模一样的时候，Q就是上等的赝品了，甚至可以打出如假包换的招牌。我们的P已经简化成N(0,I)，就意味着Q只能向N(0, I)靠拢。<br>
– <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-62-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1240" style="width: 3.336em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.158em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1003.04em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1241"><span class="mi" id="MathJax-Span-1242" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-1243" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1244" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1245"><span class="mrow" id="MathJax-Span-1246"><span class="mo" id="MathJax-Span-1247" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1248" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1249" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-62">Q(z|X)</script> —— 根据现实中X和Q的关系推导出的概率函数， 当X发生时，对应的z取值的概率分布情况。<br>
– <span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-63-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1250" style="width: 3.336em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.158em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1003.04em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1251"><span class="mi" id="MathJax-Span-1252" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-1253" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1254" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1255"><span class="mrow" id="MathJax-Span-1256"><span class="mo" id="MathJax-Span-1257" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1258" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1259" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-63">Q(X|z)</script> —— 现实中z发生时，取值X的概率。</p>
<p>我们的目标是优化P(X)，但是我们不知道他的分布，所以根本没法优化，这就是我们没有任何先验知识。所以有了公式(2)，左边第二项是<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-64-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1260" style="width: 3.277em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.098em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1002.98em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1261"><span class="mi" id="MathJax-Span-1262" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1263" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1264" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1265"><span class="mrow" id="MathJax-Span-1266"><span class="mo" id="MathJax-Span-1267" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1268" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1269" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-64">P(z|X)</script>和<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-65-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1270" style="width: 3.336em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.158em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1003.04em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1271"><span class="mi" id="MathJax-Span-1272" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-1273" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1274" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1275"><span class="mrow" id="MathJax-Span-1276"><span class="mo" id="MathJax-Span-1277" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1278" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1279" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-65">Q(z|X)</script>的相对熵，意味着X发生时现实的分布应该与我们理想的分布趋同才对，所以整个左边都是我们的优化目标，只要左边越大就越好，那么右边的目标就是越大越好。</p>
<p>右边第一项：<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-66-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1280" style="width: 7.562em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.205em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1007.09em 2.682em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1281"><span class="msubsup" id="MathJax-Span-1282"><span style="display: inline-block; position: relative; width: 2.265em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-1283" style="font-family: MathJax_Math-italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.717em;"><span class="texatom" id="MathJax-Span-1284"><span class="mrow" id="MathJax-Span-1285"><span class="mi" id="MathJax-Span-1286" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1287" style="font-size: 70.7%; font-family: MathJax_Main;">∼</span><span class="mi" id="MathJax-Span-1288" style="font-size: 70.7%; font-family: MathJax_Math-italic;">Q</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-1289" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-1290" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-1291" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-1292" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1293" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1294" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1295" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1296"><span class="mrow" id="MathJax-Span-1297"><span class="mo" id="MathJax-Span-1298" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1299" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1300" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1301" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-66">E_{z\sim Q}[logP(X|z)]</script>就是针对面对真实的z的分布情况(依赖Q(z|X)，由X-&gt;z的映射关系决定)，算出来的X的分布，类似于根据z重建X的过程。<br>
右边第二项:<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-67-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1302" style="width: 7.979em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.562em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1007.44em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1303"><span class="texatom" id="MathJax-Span-1304"><span class="mrow" id="MathJax-Span-1305"><span class="mi" id="MathJax-Span-1306" style="font-family: MathJax_Caligraphic;">D</span></span></span><span class="mo" id="MathJax-Span-1307" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-1308" style="font-family: MathJax_Math-italic;">Q</span><span class="mo" id="MathJax-Span-1309" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1310" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1311"><span class="mrow" id="MathJax-Span-1312"><span class="mo" id="MathJax-Span-1313" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1314" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1315" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1316" style="font-family: MathJax_Main; padding-left: 0.301em;">∥</span><span class="mi" id="MathJax-Span-1317" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1318" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1319" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1320" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1321" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-67">\mathcal{D}[Q(z|X) \parallel P(z)]</script> 就是让根据X重建的z与真实的z尽量趋近，由于P(z)是明确的N(0, I)，而Q(z|X)是也是正态分布，其实就是要让Q(z|X)趋近与标准正态分布。</p>
<p>现在我们对这个公式的理解更加深入了。接下来，我们要进行实现的工作。</p>
<h3>4. 实现</h3>
<p>针对右边两项分别实现<br>
第二项是Q(z|X)与N(0, I)的相对熵，X-&gt;z构成了编码器部分。<br>
Q(z|x)是正态分布，两个正态分布的KL计算公式如下（太复杂了，我也推不出来，感兴趣的看[1]）：</p>
<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-68-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1322" style="width: 27.741em; display: inline-block;"><span style="display: inline-block; position: relative; width: 26.432em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.134em 1026.31em 2.801em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1323"><span class="mi" id="MathJax-Span-1324" style="font-family: MathJax_Math-italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mi" id="MathJax-Span-1325" style="font-family: MathJax_Math-italic;">L</span><span class="mo" id="MathJax-Span-1326" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1327" style="font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1328" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1329" style="font-family: MathJax_Math-italic;">μ</span><span class="mo" id="MathJax-Span-1330" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-1331" style="font-family: MathJax_Main; padding-left: 0.182em;">Σ</span><span class="mo" id="MathJax-Span-1332" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1333" style="font-family: MathJax_Main; padding-left: 0.301em;">∥</span><span class="mi" id="MathJax-Span-1334" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1335" style="font-family: MathJax_Main;">(</span><span class="mn" id="MathJax-Span-1336" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-1337" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-1338" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1339" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1340" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1341" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mfrac" id="MathJax-Span-1342" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; margin-right: 0.122em; margin-left: 0.122em;"><span style="position: absolute; clip: rect(3.336em 1000.3em 4.17em -999.997em); top: -4.402em; left: 50%; margin-left: -0.176em;"><span class="mn" id="MathJax-Span-1343" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.336em 1000.3em 4.17em -999.997em); top: -3.568em; left: 50%; margin-left: -0.176em;"><span class="mn" id="MathJax-Span-1344" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.836em 1000.48em 1.253em -999.997em); top: -1.307em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.479em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span></span></span><span class="mo" id="MathJax-Span-1345" style="font-family: MathJax_Main;">[</span><span class="mo" id="MathJax-Span-1346" style="font-family: MathJax_Main;">−</span><span class="mi" id="MathJax-Span-1347" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-1348" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-1349" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1350" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-1351" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1352" style="font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-1353" style="font-family: MathJax_Math-italic;">t</span><span class="mo" id="MathJax-Span-1354" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1355" style="font-family: MathJax_Main;">Σ</span><span class="mo" id="MathJax-Span-1356" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1357" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-1358" style="font-family: MathJax_Main; padding-left: 0.241em;">−</span><span class="mi" id="MathJax-Span-1359" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1360" style="font-family: MathJax_Main; padding-left: 0.241em;">+</span><span class="mi" id="MathJax-Span-1361" style="font-family: MathJax_Math-italic; padding-left: 0.241em;">t</span><span class="mi" id="MathJax-Span-1362" style="font-family: MathJax_Math-italic;">r</span><span class="mo" id="MathJax-Span-1363" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1364" style="font-family: MathJax_Main;">Σ</span><span class="mo" id="MathJax-Span-1365" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1366" style="font-family: MathJax_Main; padding-left: 0.241em;">+</span><span class="msubsup" id="MathJax-Span-1367" style="padding-left: 0.241em;"><span style="display: inline-block; position: relative; width: 1.193em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.6em 4.408em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-1368" style="font-family: MathJax_Math-italic;">μ</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -4.342em; left: 0.598em;"><span class="mi" id="MathJax-Span-1369" style="font-size: 70.7%; font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mi" id="MathJax-Span-1370" style="font-family: MathJax_Math-italic;">μ</span><span class="mo" id="MathJax-Span-1371" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.503em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-68">KL(N(\mu, \Sigma) \parallel N(0, I)) = \frac{1}{2}[-log[det(\Sigma)] -d + tr(\Sigma) + \mu^T\mu] </script>
<p><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-69-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1372" style="width: 1.432em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.372em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1001.31em 2.324em -999.997em); top: -2.14em; left: 0em;"><span class="mrow" id="MathJax-Span-1373"><span class="mi" id="MathJax-Span-1374" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1375" style="font-family: MathJax_Math-italic;">e</span><span class="mi" id="MathJax-Span-1376" style="font-family: MathJax_Math-italic;">t</span></span><span style="display: inline-block; width: 0px; height: 2.146em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-69">det</script>是行列式，<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-70-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1377" style="width: 0.896em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.313em 1000.84em 2.324em -999.997em); top: -2.14em; left: 0em;"><span class="mrow" id="MathJax-Span-1378"><span class="mi" id="MathJax-Span-1379" style="font-family: MathJax_Math-italic;">t</span><span class="mi" id="MathJax-Span-1380" style="font-family: MathJax_Math-italic;">r</span></span><span style="display: inline-block; width: 0px; height: 2.146em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-70">tr</script>是算矩阵的秩，<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-71-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1381" style="width: 0.598em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.539em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1000.54em 2.324em -999.997em); top: -2.14em; left: 0em;"><span class="mrow" id="MathJax-Span-1382"><span class="mi" id="MathJax-Span-1383" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.146em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-71">d</script>是<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-72-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1384" style="width: 0.539em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.313em 1000.48em 2.324em -999.997em); top: -2.14em; left: 0em;"><span class="mrow" id="MathJax-Span-1385"><span class="mi" id="MathJax-Span-1386" style="font-family: MathJax_Math-italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.146em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-72">I</script>的秩即<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-73-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1387" style="width: 4.229em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.991em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1003.87em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1388"><span class="mi" id="MathJax-Span-1389" style="font-family: MathJax_Math-italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1390" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mi" id="MathJax-Span-1391" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">t</span><span class="mi" id="MathJax-Span-1392" style="font-family: MathJax_Math-italic;">r</span><span class="mo" id="MathJax-Span-1393" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1394" style="font-family: MathJax_Math-italic;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1395" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-73">d=tr(I)</script>。</p>
<p>变成具体的神经网络和矩阵运算，还需要进一步变化该式：</p>
<p><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-74-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1396" style="width: 24.943em; display: inline-block;"><span style="display: inline-block; position: relative; width: 23.753em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.134em 1023.63em 2.801em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1397"><span class="mi" id="MathJax-Span-1398" style="font-family: MathJax_Math-italic;">K<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mi" id="MathJax-Span-1399" style="font-family: MathJax_Math-italic;">L</span><span class="mo" id="MathJax-Span-1400" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1401" style="font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1402" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1403" style="font-family: MathJax_Math-italic;">μ</span><span class="mo" id="MathJax-Span-1404" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-1405" style="font-family: MathJax_Main; padding-left: 0.182em;">Σ</span><span class="mo" id="MathJax-Span-1406" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1407" style="font-family: MathJax_Main; padding-left: 0.301em;">∥</span><span class="mi" id="MathJax-Span-1408" style="font-family: MathJax_Math-italic; padding-left: 0.301em;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1409" style="font-family: MathJax_Main;">(</span><span class="mn" id="MathJax-Span-1410" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-1411" style="font-family: MathJax_Main;">,</span><span class="mi" id="MathJax-Span-1412" style="font-family: MathJax_Math-italic; padding-left: 0.182em;">I<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.063em;"></span></span><span class="mo" id="MathJax-Span-1413" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1414" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1415" style="font-family: MathJax_Main; padding-left: 0.301em;">=</span><span class="mfrac" id="MathJax-Span-1416" style="padding-left: 0.301em;"><span style="display: inline-block; position: relative; width: 0.479em; height: 0px; margin-right: 0.122em; margin-left: 0.122em;"><span style="position: absolute; clip: rect(3.336em 1000.3em 4.17em -999.997em); top: -4.402em; left: 50%; margin-left: -0.176em;"><span class="mn" id="MathJax-Span-1417" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.336em 1000.3em 4.17em -999.997em); top: -3.568em; left: 50%; margin-left: -0.176em;"><span class="mn" id="MathJax-Span-1418" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(0.836em 1000.48em 1.253em -999.997em); top: -1.307em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.479em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.074em;"></span></span></span></span><span class="munderover" id="MathJax-Span-1419" style="padding-left: 0.182em;"><span style="display: inline-block; position: relative; width: 1.372em; height: 0px;"><span style="position: absolute; clip: rect(3.039em 1001.01em 4.408em -999.997em); top: -3.985em; left: 0em;"><span class="mo" id="MathJax-Span-1420" style="font-family: MathJax_Size1; vertical-align: 0em;">∑</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.688em; left: 1.074em;"><span class="texatom" id="MathJax-Span-1421"><span class="mrow" id="MathJax-Span-1422"><span class="mi" id="MathJax-Span-1423" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-1424" style="font-family: MathJax_Main;">[</span><span class="mo" id="MathJax-Span-1425" style="font-family: MathJax_Main;">−</span><span class="mi" id="MathJax-Span-1426" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-1427" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-1428" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1429" style="font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-1430"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.66em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-1431" style="font-family: MathJax_Main;">Σ</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.717em;"><span class="texatom" id="MathJax-Span-1432"><span class="mrow" id="MathJax-Span-1433"><span class="mi" id="MathJax-Span-1434" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-1435" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1436" style="font-family: MathJax_Main; padding-left: 0.241em;">+</span><span class="msubsup" id="MathJax-Span-1437" style="padding-left: 0.241em;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.66em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-1438" style="font-family: MathJax_Main;">Σ</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.717em;"><span class="texatom" id="MathJax-Span-1439"><span class="mrow" id="MathJax-Span-1440"><span class="mi" id="MathJax-Span-1441" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-1442" style="font-family: MathJax_Main; padding-left: 0.241em;">+</span><span class="msubsup" id="MathJax-Span-1443" style="padding-left: 0.241em;"><span style="display: inline-block; position: relative; width: 1.015em; height: 0px;"><span style="position: absolute; clip: rect(3.396em 1000.6em 4.408em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-1444" style="font-family: MathJax_Math-italic;">μ</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.336em 1000.42em 4.17em -999.997em); top: -4.342em; left: 0.598em;"><span class="mn" id="MathJax-Span-1445" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; clip: rect(3.336em 1000.3em 4.17em -999.997em); top: -3.688em; left: 0.598em;"><span class="texatom" id="MathJax-Span-1446"><span class="mrow" id="MathJax-Span-1447"><span class="mi" id="MathJax-Span-1448" style="font-size: 70.7%; font-family: MathJax_Math-italic;">i</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-1449" style="font-family: MathJax_Main;">–</span><span class="mn" id="MathJax-Span-1450" style="font-family: MathJax_Main; padding-left: 0.182em;">1</span><span class="mo" id="MathJax-Span-1451" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.503em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-74">KL(N(\mu, \Sigma) \parallel N(0, I)) = \frac{1}{2}\sum_{i}[-log(\Sigma_{i}) + \Sigma_{i} + \mu_{i}^2 – 1] </script><br>
OK，这个KL我们也会计算了，还有一个事情就是编码器网络，<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-75-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1452" style="width: 2.324em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.205em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1002.09em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1453"><span class="mi" id="MathJax-Span-1454" style="font-family: MathJax_Math-italic;">μ</span><span class="mo" id="MathJax-Span-1455" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1456" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1457" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-75">\mu(X)</script>和<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-76-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1458" style="width: 2.443em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.324em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1002.21em 2.622em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1459"><span class="mi" id="MathJax-Span-1460" style="font-family: MathJax_Main;">Σ</span><span class="mo" id="MathJax-Span-1461" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1462" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1463" style="font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-76">\Sigma(X)</script>都使用神经网络来编码就可以了。</p>
<p>第一项是<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-77-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1464" style="width: 7.562em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.205em; height: 0px; font-size: 105%;"><span style="position: absolute; clip: rect(1.253em 1007.09em 2.682em -999.997em); top: -2.199em; left: 0em;"><span class="mrow" id="MathJax-Span-1465"><span class="msubsup" id="MathJax-Span-1466"><span style="display: inline-block; position: relative; width: 2.265em; height: 0px;"><span style="position: absolute; clip: rect(3.158em 1000.78em 4.17em -999.997em); top: -3.985em; left: 0em;"><span class="mi" id="MathJax-Span-1467" style="font-family: MathJax_Math-italic;">E<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span><span style="position: absolute; top: -3.807em; left: 0.717em;"><span class="texatom" id="MathJax-Span-1468"><span class="mrow" id="MathJax-Span-1469"><span class="mi" id="MathJax-Span-1470" style="font-size: 70.7%; font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1471" style="font-size: 70.7%; font-family: MathJax_Main;">∼</span><span class="mi" id="MathJax-Span-1472" style="font-size: 70.7%; font-family: MathJax_Math-italic;">Q</span></span></span><span style="display: inline-block; width: 0px; height: 3.991em;"></span></span></span></span><span class="mo" id="MathJax-Span-1473" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-1474" style="font-family: MathJax_Math-italic;">l</span><span class="mi" id="MathJax-Span-1475" style="font-family: MathJax_Math-italic;">o</span><span class="mi" id="MathJax-Span-1476" style="font-family: MathJax_Math-italic;">g<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-1477" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.122em;"></span></span><span class="mo" id="MathJax-Span-1478" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-1479" style="font-family: MathJax_Math-italic;">X<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="texatom" id="MathJax-Span-1480"><span class="mrow" id="MathJax-Span-1481"><span class="mo" id="MathJax-Span-1482" style="font-family: MathJax_Main;">|</span></span></span><span class="mi" id="MathJax-Span-1483" style="font-family: MathJax_Math-italic;">z<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1484" style="font-family: MathJax_Main;">)</span><span class="mo" id="MathJax-Span-1485" style="font-family: MathJax_Main;">]</span></span><span style="display: inline-block; width: 0px; height: 2.205em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-77">E_{z\sim Q}[logP(X|z)] </script>代表依赖z重建出来的数据与X尽量地相同，z-&gt;X重建X构成了解码器部分，整个重建的关键就是f函数，对我们来说就是建立一个解码器神经网络。</p>
<p>到此，整个实现的细节就全都展现在下面这张图里了</p>
<p><a href="./变分自编码器_files/111.png" rel="attachment wp-att-341"><img class="aligncenter size-full wp-image-341" src="./变分自编码器_files/111.png" alt="111" width="1113" height="572" srcset="http://www.dengfanxin.cn/wp-content/uploads/2016/11/111-300x154.png 300w, http://www.dengfanxin.cn/wp-content/uploads/2016/11/111-768x395.png 768w, http://www.dengfanxin.cn/wp-content/uploads/2016/11/111-1024x526.png 1024w, http://www.dengfanxin.cn/wp-content/uploads/2016/11/111.png 1113w" sizes="(max-width: 1113px) 100vw, 1113px"></a></p>
<p>由于这个网络传递结构的一个环节是随机采样，导致无法反向传播，所以聪明的前辈又将这个结构优化成了这样：</p>
<p><a href="./变分自编码器_files/222.png" rel="attachment wp-att-342"><img class="aligncenter size-full wp-image-342" src="./变分自编码器_files/222.png" alt="222" width="1113" height="560" srcset="http://www.dengfanxin.cn/wp-content/uploads/2016/11/222-300x151.png 300w, http://www.dengfanxin.cn/wp-content/uploads/2016/11/222-768x386.png 768w, http://www.dengfanxin.cn/wp-content/uploads/2016/11/222-1024x515.png 1024w, http://www.dengfanxin.cn/wp-content/uploads/2016/11/222.png 1113w" sizes="(max-width: 1113px) 100vw, 1113px"></a></p>
<p>这样就可以对整个网络进行反向传播训练了。</p>
<p>具体的实现代码，我实现在了这里：</p>
<p>https://github.com/vaxin/TensorFlow-Examples/blob/master/examples/3_NeuralNetworks/variational_autoencoder.py</p>
<p>里面的每一步，都有配合本文章的对照解释。</p>
<h3>5. 延伸思考</h3>
<p>之所以关注VAE，是从文献[4]引发的，由于视觉早期的概念形成对于之后的视觉认知起了十分关键的作用，我们有理由相信，在神经网络训练时，利用这种递进关系，先构建具有基础认知能力的神经网络，再做高级认知任务时会有极大的效果提升。但通过前面神秘变量的分析，我们发现，为了充分利用高斯分布，我们将w替换成了z，也就是说真正的隐变量隐藏在f的神经网络里面，而现在的z反而容易变成说不清楚的东西，这一不利于后续的时候，二来我们需要思考，是否应该还原真实的z，从而在层次化递进上有更大的发挥空间。</p>
<p>[1] http://stats.stackexchange.com/questions/60680/kl-divergence-between-two-multivariate-gaussians<br>
[2] https://arxiv.org/abs/1606.05908<br>
[3] https://zhuanlan.zhihu.com/p/22464768<br>
[4] https://arxiv.org/abs/1606.05579<br>
</p><hr>
<div><center>微信公众号: 深度学习</center><a href="./变分自编码器_files/qrcode_for_gh_79a66349c8c4_258.jpg"><img class="aligncenter size-full wp-image-153" src="./变分自编码器_files/qrcode_for_gh_79a66349c8c4_258.jpg" alt="qrcode_for_gh_79a66349c8c4_258" width="258" height="258"></a><br>
        <center>版权所有，转载请注明出处: <a href="http://www.dengfanxin.cn/">dengfanxin.cn</a></center>
        </div>
	</div>

	</article>
				
		<ul class="default-wp-page clearfix">
			<li class="previous"><a href="http://www.dengfanxin.cn/?p=330" rel="prev"><span class="meta-nav">←</span> STDP与无监督学习</a></li>
			<li class="next"></li>
		</ul>
	
				
			
		</div><!-- #content -->
	</div><!-- #primary -->
	
	
<div id="secondary">
			
		<aside id="search-2" class="widget widget_search"><form action="http://www.dengfanxin.cn/" id="search-form" class="searchform clearfix" method="get">
	<input type="text" placeholder="Search" class="s field" name="s">
	<input type="submit" value="Search" id="search-submit" name="submit" class="submit">
</form><!-- .searchform --></aside><aside id="text-3" class="widget widget_text"><h3 class="widget-title"><span>微信公众号</span></h3>			<div class="textwidget"><img class="size-full wp-image-153" src="./变分自编码器_files/qrcode_for_gh_79a66349c8c4_258.jpg" alt="qrcode_for_gh_79a66349c8c4_258" width="200" height="200">
        </div>
		</aside><aside id="categories-2" class="widget widget_categories"><h3 class="widget-title"><span>分类目录</span></h3>		<ul>
	<li class="cat-item cat-item-4"><a href="http://www.dengfanxin.cn/?cat=4">思想实验</a>
</li>
	<li class="cat-item cat-item-38"><a href="http://www.dengfanxin.cn/?cat=38">感想</a>
</li>
	<li class="cat-item cat-item-31"><a href="http://www.dengfanxin.cn/?cat=31">教程</a>
</li>
	<li class="cat-item cat-item-3"><a href="http://www.dengfanxin.cn/?cat=3">智能技术</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://www.dengfanxin.cn/?cat=1">未来</a>
</li>
	<li class="cat-item cat-item-12"><a href="http://www.dengfanxin.cn/?cat=12">经典翻译</a>
</li>
	<li class="cat-item cat-item-5"><a href="http://www.dengfanxin.cn/?cat=5">论文</a>
</li>
		</ul>
</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title"><span>近期文章</span></h3>		<ul>
					<li>
				<a href="http://www.dengfanxin.cn/?p=334">变分自编码器（Variational Autoencoder, VAE）通俗教程</a>
						</li>
					<li>
				<a href="http://www.dengfanxin.cn/?p=330">STDP与无监督学习</a>
						</li>
					<li>
				<a href="http://www.dengfanxin.cn/?p=314">大脑、小脑与运动控制原理</a>
						</li>
					<li>
				<a href="http://www.dengfanxin.cn/?p=310">小议动态神经网络</a>
						</li>
					<li>
				<a href="http://www.dengfanxin.cn/?p=308">Deep Learning Tutorial 深度学习教程翻译</a>
						</li>
				</ul>
		</aside>		<aside id="archives-2" class="widget widget_archive"><h3 class="widget-title"><span>文章归档</span></h3>		<ul>
			<li><a href="http://www.dengfanxin.cn/?m=201611">2016年十一月</a></li>
	<li><a href="http://www.dengfanxin.cn/?m=201610">2016年十月</a></li>
	<li><a href="http://www.dengfanxin.cn/?m=201609">2016年九月</a></li>
	<li><a href="http://www.dengfanxin.cn/?m=201607">2016年七月</a></li>
	<li><a href="http://www.dengfanxin.cn/?m=201606">2016年六月</a></li>
	<li><a href="http://www.dengfanxin.cn/?m=201605">2016年五月</a></li>
	<li><a href="http://www.dengfanxin.cn/?m=201604">2016年四月</a></li>
	<li><a href="http://www.dengfanxin.cn/?m=201603">2016年三月</a></li>
	<li><a href="http://www.dengfanxin.cn/?m=201601">2016年一月</a></li>
	<li><a href="http://www.dengfanxin.cn/?m=201512">2015年十二月</a></li>
	<li><a href="http://www.dengfanxin.cn/?m=201509">2015年九月</a></li>
	<li><a href="http://www.dengfanxin.cn/?m=201507">2015年七月</a></li>
	<li><a href="http://www.dengfanxin.cn/?m=201405">2014年五月</a></li>
		</ul>
		</aside>	</div>	
	

		</div><!-- .inner-wrap -->
	</div><!-- #main -->	
			<footer id="colophon" class="clearfix">	
			
	
			<div class="footer-socket-wrapper clearfix">
				<div class="inner-wrap">
					<div class="footer-socket-area">
						<div class="copyright">版权所有,转载请注明出处 © 2016 <a href="http://www.dengfanxin.cn/" title="邓范鑫——致力于变革未来的智能技术"><span>邓范鑫——致力于变革未来的智能技术</span></a>.</div>						<nav class="footer-menu">
									    			</nav>
					</div>
				</div>
			</div>			
		</footer>
		<a href="http://www.dengfanxin.cn/?p=334#masthead" id="scroll-up" style="display: block;"><i class="fa fa-long-arrow-up"></i></a>	
	</div><!-- #page -->
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?02d264e9ed56352280affee73cef2af8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

	<!-- MathJax Latex Plugin installed --><script type="text/javascript" src="./变分自编码器_files/navigation.js.下载"></script>
<script type="text/javascript" src="./变分自编码器_files/wp-embed.min.js.下载"></script>
<script type="text/javascript" src="./变分自编码器_files/MathJax.js.下载"></script>


<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-family: MathJax_Caligraphic, sans-serif;"></div></div></body></html>